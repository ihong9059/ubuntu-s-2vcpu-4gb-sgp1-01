<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Words - ì˜ì–´ ë‹¨ì–´ í•™ìŠµ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=pxbXEbQF"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        * { font-family: 'Noto Sans KR', sans-serif; }

        body {
            background: linear-gradient(-45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff, #5f27cd);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ë°˜ì§ì´ëŠ” ë³„ ë°°ê²½ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image:
                radial-gradient(2px 2px at 20px 30px, #fff, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(3px 3px at 50px 160px, #fff, transparent),
                radial-gradient(2px 2px at 90px 40px, #fff, transparent),
                radial-gradient(3px 3px at 130px 80px, #fff, transparent),
                radial-gradient(2px 2px at 160px 120px, #fff, transparent),
                radial-gradient(3px 3px at 200px 50px, #fff, transparent),
                radial-gradient(2px 2px at 250px 90px, #fff, transparent),
                radial-gradient(2px 2px at 300px 150px, #fff, transparent),
                radial-gradient(3px 3px at 350px 60px, #fff, transparent);
            background-repeat: repeat;
            background-size: 400px 200px;
            animation: twinkle 4s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .main-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        .header {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2), 0 0 20px rgba(255,255,255,0.5);
            border: 3px solid rgba(255,255,255,0.8);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-right: 8px;
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
            animation: pulse-badge 2s ease-in-out infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .stat-badge i {
            margin-right: 5px;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .game-card {
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2), 0 0 30px rgba(255,255,255,0.3);
            overflow: hidden;
            margin-bottom: 20px;
            border: 4px solid rgba(255,255,255,0.8);
            animation: cardAppear 0.5s ease-out;
        }

        @keyframes cardAppear {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .card-header-custom {
            background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb);
            background-size: 200% 200%;
            animation: headerGradient 5s ease infinite;
            color: white;
            padding: 25px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        @keyframes headerGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .card-body-custom {
            padding: 25px;
            background: linear-gradient(180deg, #fff 0%, #f8f9ff 100%);
        }

        /* ë©”ë‰´ ë²„íŠ¼ - ì–´ë¦°ì´ìš© ìŠ¤íƒ€ì¼ */
        .menu-btn {
            background: linear-gradient(145deg, #fff, #f0f0ff);
            border: 4px solid #e0e0ff;
            border-radius: 25px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.8), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .menu-btn:hover::before {
            animation: shine 0.5s forwards;
        }

        @keyframes shine {
            from { left: -50%; opacity: 1; }
            to { left: 150%; opacity: 0; }
        }

        .menu-btn:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(255,107,107,0.3);
            border-color: #ff6b6b;
            background: linear-gradient(145deg, #fff5f5, #fff);
        }

        .menu-btn:active {
            transform: translateY(-5px) scale(0.98);
        }

        .menu-btn .icon {
            font-size: 4rem;
            margin-bottom: 10px;
            display: block;
            animation: bounce-icon 2s ease-in-out infinite;
        }

        @keyframes bounce-icon {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(-5deg); }
            75% { transform: translateY(-10px) rotate(5deg); }
        }

        .menu-btn h4 {
            margin: 0;
            color: #333;
            font-weight: 800;
            font-size: 1.1rem;
        }

        .menu-btn p {
            margin: 5px 0 0;
            color: #888;
            font-size: 0.85rem;
        }

        /* í€´ì¦ˆ ë²„íŠ¼ ìƒíƒœ */
        #quizMenuBtn {
            opacity: 0.6;
        }

        #quizMenuBtn.quiz-ready {
            opacity: 1;
            animation: pulse-ready 2s infinite;
        }

        @keyframes pulse-ready {
            0%, 100% { box-shadow: 0 5px 20px rgba(255,107,107,0.3); }
            50% { box-shadow: 0 5px 30px rgba(255,107,107,0.6); }
        }

        /* í”Œë˜ì‹œì¹´ë“œ - ì–´ë¦°ì´ìš© */
        .flashcard {
            background: linear-gradient(145deg, #fff8e1, #fff);
            border: 5px solid #feca57;
            border-radius: 30px;
            padding: 40px 30px;
            text-align: center;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            box-shadow: 0 10px 30px rgba(254,202,87,0.3);
        }

        .flashcard:hover {
            transform: scale(1.05) rotate(1deg);
            box-shadow: 0 20px 50px rgba(254,202,87,0.4);
            border-color: #ff6b6b;
        }

        .flashcard .word {
            font-size: 3rem;
            font-weight: 900;
            color: #5f27cd;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
            animation: wordPop 0.5s ease-out;
        }

        @keyframes wordPop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .flashcard .meaning {
            font-size: 1.8rem;
            color: #ff6b6b;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .flashcard .example {
            font-size: 1.1rem;
            color: #666;
            font-style: italic;
            background: rgba(255,255,255,0.7);
            padding: 10px 15px;
            border-radius: 15px;
        }

        .flashcard .category-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #48dbfb, #0abde3);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(72,219,251,0.4);
        }

        .flashcard .level-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, #00d2d3, #10ac84);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0,210,211,0.4);
        }

        /* í€´ì¦ˆ ì˜µì…˜ - ì–´ë¦°ì´ìš© */
        .quiz-option {
            background: linear-gradient(145deg, #f0f0ff, #fff);
            border: 4px solid #ddd;
            border-radius: 20px;
            padding: 18px 25px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            font-size: 1.2rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .quiz-option::before {
            content: 'ğŸ‘†';
            position: absolute;
            right: 15px;
            opacity: 0;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #54a0ff;
            background: linear-gradient(145deg, #e8f4ff, #fff);
            transform: translateX(10px) scale(1.02);
            box-shadow: 0 10px 25px rgba(84,160,255,0.3);
        }

        .quiz-option:hover::before {
            opacity: 1;
        }

        .quiz-option.correct {
            background: linear-gradient(145deg, #d4edda, #c3e6cb);
            border-color: #28a745;
            color: #155724;
            animation: correctPop 0.5s ease-out;
        }

        .quiz-option.correct::before {
            content: 'ğŸ‰';
            opacity: 1;
        }

        @keyframes correctPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .quiz-option.wrong {
            background: linear-gradient(145deg, #f8d7da, #f5c6cb);
            border-color: #dc3545;
            color: #721c24;
            animation: wrongShake 0.5s ease-out;
        }

        .quiz-option.wrong::before {
            content: 'ğŸ˜…';
            opacity: 1;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .quiz-option.disabled {
            pointer-events: none;
        }

        /* ì§„í–‰ ë°” - í™”ë ¤í•œ ë²„ì „ */
        .progress-custom {
            height: 15px;
            border-radius: 15px;
            background: linear-gradient(90deg, #e0e0e0, #f0f0f0);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .progress-custom .progress-bar {
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            background-size: 300% 100%;
            animation: progressGradient 3s linear infinite;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(255,107,107,0.5);
        }

        @keyframes progressGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 300% 50%; }
        }

        /* ë²„íŠ¼ - ì–´ë¦°ì´ìš© */
        .btn-gradient {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            border: none;
            color: white;
            padding: 15px 35px;
            border-radius: 25px;
            font-weight: 800;
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 8px 20px rgba(255,107,107,0.4);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .btn-gradient:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(255,107,107,0.5);
            color: white;
        }

        .btn-gradient:active {
            transform: translateY(-2px) scale(0.98);
        }

        /* ê²°ê³¼ í™”ë©´ - í™”ë ¤í•œ ë²„ì „ */
        .result-emoji {
            font-size: 6rem;
            margin-bottom: 20px;
            animation: resultEmoji 1s ease-out;
        }

        @keyframes resultEmoji {
            0% { transform: scale(0) rotate(-180deg); }
            50% { transform: scale(1.3) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .result-score {
            font-size: 5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: scoreGradient 3s ease infinite;
        }

        @keyframes scoreGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ë ˆë²¨ì—… ëª¨ë‹¬ */
        .level-up-animation {
            animation: levelUp 0.5s ease-out;
        }

        @keyframes levelUp {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* XP ë°” - í™”ë ¤í•œ ë²„ì „ */
        .xp-bar {
            height: 12px;
            background: linear-gradient(90deg, #e0e0e0, #f5f5f5);
            border-radius: 12px;
            overflow: hidden;
            margin-top: 5px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .xp-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #feca57, #ff6b6b, #ff9ff3);
            background-size: 200% 100%;
            border-radius: 12px;
            transition: width 0.5s ease;
            animation: xpGlow 2s ease infinite;
            box-shadow: 0 0 10px rgba(254,202,87,0.6);
        }

        @keyframes xpGlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* ìˆ¨ê¹€ */
        .hidden { display: none !important; }

        /* ë°œìŒ ë²„íŠ¼ - ê·€ì—¬ìš´ ë²„ì „ */
        .speak-btn {
            background: linear-gradient(135deg, #54a0ff, #48dbfb);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            margin: 10px 5px;
            box-shadow: 0 8px 20px rgba(84,160,255,0.4);
        }

        .speak-btn:hover {
            background: linear-gradient(135deg, #48dbfb, #00d2d3);
            transform: scale(1.2) rotate(10deg);
            box-shadow: 0 12px 30px rgba(72,219,251,0.5);
        }

        .speak-btn:active {
            transform: scale(0.95);
        }

        /* ìŠ¤íŠ¸ë¦­ - ë” í™”ë ¤í•œ ë¶ˆê½ƒ */
        .streak-fire {
            color: #ff6b6b;
            animation: firePulse 0.5s infinite alternate;
            text-shadow: 0 0 10px #ff6b6b, 0 0 20px #feca57;
        }

        @keyframes firePulse {
            0% { transform: scale(1); filter: brightness(1); }
            100% { transform: scale(1.3); filter: brightness(1.2); }
        }

        /* í™ˆ ë²„íŠ¼ - ì§‘ ëª¨ì–‘ */
        .home-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(145deg, #fff, #f0f0f0);
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15), inset 0 -2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .home-btn:hover {
            transform: scale(1.15) rotate(-10deg);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            background: linear-gradient(145deg, #fff5f5, #fff);
        }

        .home-btn:active {
            transform: scale(0.95);
        }

        /* ì¹´í…Œê³ ë¦¬ ë°°ì§€ - ê·€ì—¬ìš´ íƒœê·¸ ëª¨ì–‘ */
        .category-tag {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(108,92,231,0.4);
            position: relative;
        }

        .category-tag::before {
            content: 'ğŸ·ï¸';
            font-size: 1rem;
        }

        /* ì§„í–‰ ì¹´ìš´í„° */
        .progress-counter {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 800;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* ì ìˆ˜ ë°°ì§€ */
        .score-badge {
            background: linear-gradient(135deg, #feca57, #ff9f43);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 800;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(254,202,87,0.5);
            animation: scorePulse 2s ease-in-out infinite;
        }

        @keyframes scorePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* ===== ì§„í–‰ ìƒí™© í˜ì´ì§€ ìŠ¤íƒ€ì¼ ===== */

        .section-title {
            font-weight: 800;
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ë­í¬ ì¹´ë“œ */
        .rank-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 25px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 30px rgba(102,126,234,0.4);
            position: relative;
            overflow: hidden;
        }

        .rank-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: rankShine 3s infinite;
        }

        @keyframes rankShine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .rank-character {
            font-size: 4rem;
            animation: characterBounce 2s ease-in-out infinite;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
        }

        @keyframes characterBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .rank-info {
            flex: 1;
            color: white;
        }

        .rank-title {
            font-size: 1.4rem;
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .rank-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .rank-badge {
            font-size: 3rem;
            animation: badgeRotate 4s ease-in-out infinite;
        }

        @keyframes badgeRotate {
            0%, 100% { transform: rotate(-5deg) scale(1); }
            50% { transform: rotate(5deg) scale(1.1); }
        }

        /* ë©”ë‹¬ ì„¹ì…˜ */
        .medal-section {
            background: linear-gradient(145deg, #fff8e1, #fff);
            border-radius: 20px;
            padding: 20px;
            border: 3px solid #ffd54f;
        }

        .medal-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 10px;
        }

        .medal-item {
            text-align: center;
        }

        .medal {
            font-size: 3.5rem;
            display: block;
            transition: all 0.3s;
            cursor: pointer;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
        }

        .medal:hover {
            transform: scale(1.2) rotate(10deg);
        }

        .medal.bronze { animation: medalShine 3s infinite; }
        .medal.silver { animation: medalShine 3s infinite 0.5s; }
        .medal.gold { animation: medalShine 3s infinite 1s; }

        @keyframes medalShine {
            0%, 100% { filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2)) brightness(1); }
            50% { filter: drop-shadow(0 5px 25px rgba(255,215,0,0.6)) brightness(1.2); }
        }

        .medal-count {
            font-size: 1.8rem;
            font-weight: 900;
            color: #333;
            margin-top: 5px;
        }

        .medal-label {
            font-size: 0.85rem;
            color: #666;
            font-weight: 600;
        }

        .medal-hint {
            text-align: center;
            font-size: 0.75rem;
            color: #888;
            margin-top: 10px;
            padding: 8px;
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        /* ì—…ì  ë°°ì§€ */
        .achievement-section {
            background: linear-gradient(145deg, #e8f5e9, #fff);
            border-radius: 20px;
            padding: 20px;
            border: 3px solid #81c784;
        }

        .badge-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .achievement-badge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: linear-gradient(145deg, #f5f5f5, #e0e0e0);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
            position: relative;
        }

        .achievement-badge.unlocked {
            background: linear-gradient(145deg, #fff176, #ffd54f);
            box-shadow: 0 4px 20px rgba(255,213,79,0.5);
            animation: badgePop 0.5s ease-out;
        }

        .achievement-badge.locked {
            filter: grayscale(1);
            opacity: 0.4;
        }

        .achievement-badge:hover {
            transform: scale(1.15);
        }

        @keyframes badgePop {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        /* ìŠ¤íŠ¸ë¦­ ì„¹ì…˜ */
        .streak-section {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 30px rgba(255,107,107,0.4);
        }

        .streak-flame-container {
            margin-bottom: 15px;
        }

        .streak-flames {
            font-size: 4rem;
            animation: flameAnimation 0.5s ease-in-out infinite alternate;
            display: inline-block;
        }

        @keyframes flameAnimation {
            0% { transform: scale(1) rotate(-5deg); filter: brightness(1); }
            100% { transform: scale(1.1) rotate(5deg); filter: brightness(1.2); }
        }

        .streak-number {
            font-size: 3.5rem;
            font-weight: 900;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            line-height: 1;
        }

        .streak-label {
            font-size: 1.1rem;
            font-weight: 600;
            opacity: 0.95;
        }

        .streak-calendar {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }

        .streak-day {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            background: rgba(255,255,255,0.3);
        }

        .streak-day.completed {
            background: rgba(255,255,255,0.9);
            color: #ff6b6b;
        }

        .streak-day.today {
            border: 3px solid white;
            animation: todayPulse 1.5s infinite;
        }

        @keyframes todayPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255,255,255,0.7); }
            50% { box-shadow: 0 0 0 10px rgba(255,255,255,0); }
        }

        /* ì§„í–‰ë¥  ì„¹ì…˜ */
        .progress-section {
            background: linear-gradient(145deg, #e3f2fd, #fff);
            border-radius: 20px;
            padding: 20px;
            border: 3px solid #64b5f6;
        }

        .master-progress {
            position: relative;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-weight: 700;
        }

        .learned-count { color: #1976d2; }
        .learned-percent { color: #4caf50; font-size: 1.2rem; }

        /* í†µê³„ ê·¸ë¦¬ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .stat-card.stat-days { border-color: #81d4fa; background: linear-gradient(145deg, #e1f5fe, #fff); }
        .stat-card.stat-quizzes { border-color: #ce93d8; background: linear-gradient(145deg, #f3e5f5, #fff); }
        .stat-card.stat-accuracy { border-color: #a5d6a7; background: linear-gradient(145deg, #e8f5e9, #fff); }
        .stat-card.stat-xp { border-color: #ffcc80; background: linear-gradient(145deg, #fff3e0, #fff); }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 900;
            color: #333;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #666;
            font-weight: 600;
        }

        /* ===== ì„¤ì • í˜ì´ì§€ íƒ­ ìŠ¤íƒ€ì¼ ===== */
        .settings-tabs {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .settings-tab {
            flex: 1;
            min-width: 70px;
            padding: 12px 8px;
            border: none;
            border-radius: 15px;
            background: linear-gradient(145deg, #ffcccb, #ffb3b3);
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .settings-tab:hover {
            background: linear-gradient(145deg, #ff9999, #ff8080);
            transform: translateY(-2px);
        }

        .settings-tab.active {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            box-shadow: 0 5px 15px rgba(255,68,68,0.4);
        }

        .tab-content {
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì‚¬ìš©ë²• ê°€ì´ë“œ ìŠ¤íƒ€ì¼ */
        .guide-section {
            background: linear-gradient(145deg, #f8f9ff, #fff);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            border: 3px solid #e0e0ff;
        }

        .guide-title {
            font-weight: 800;
            color: #5f27cd;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .guide-content {
            font-size: 0.95rem;
            color: #555;
            line-height: 1.8;
        }

        .guide-content p {
            margin-bottom: 8px;
        }

        .guide-step {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255,255,255,0.7);
            border-radius: 12px;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            flex-shrink: 0;
        }

        /* ê¸°ëŠ¥ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .feature-card {
            display: flex;
            gap: 15px;
            background: linear-gradient(145deg, #fff, #f8f8ff);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 12px;
            border: 3px solid #e8e8ff;
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateX(5px);
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102,126,234,0.2);
        }

        .feature-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
        }

        .feature-info h6 {
            font-weight: 800;
            color: #333;
            margin-bottom: 5px;
        }

        .feature-info p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
        }

        .feature-detail {
            font-size: 0.8rem;
            color: #888;
            background: rgba(0,0,0,0.03);
            padding: 8px 12px;
            border-radius: 10px;
        }

        /* íŒ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .tip-card {
            display: flex;
            gap: 15px;
            background: linear-gradient(145deg, #fff8e1, #fff);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 12px;
            border: 3px solid #ffd54f;
            transition: all 0.3s;
        }

        .tip-card:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(255,213,79,0.3);
        }

        .tip-card.tip-important {
            background: linear-gradient(145deg, #e3f2fd, #fff);
            border-color: #64b5f6;
        }

        .tip-card.tip-fun {
            background: linear-gradient(145deg, #fce4ec, #fff);
            border-color: #f48fb1;
        }

        .tip-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .tip-content {
            font-size: 0.9rem;
            color: #555;
            line-height: 1.6;
        }

        .tip-content strong {
            color: #333;
            display: block;
            margin-bottom: 5px;
        }

        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            .main-container {
                padding: 10px;
            }
            .flashcard .word {
                font-size: 2rem;
            }
            .flashcard .meaning {
                font-size: 1.2rem;
            }
            .stat-badge {
                padding: 6px 10px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- í—¤ë” -->
        <div class="header">
            <div class="d-flex justify-content-between align-items-center flex-wrap">
                <div>
                    <span class="stat-badge"><i class="bi bi-fire streak-fire"></i> <span id="streak">0</span>ì¼</span>
                    <span class="stat-badge"><i class="bi bi-star-fill"></i> Lv.<span id="level">1</span></span>
                    <span class="stat-badge"><i class="bi bi-lightning-fill"></i> <span id="xp">0</span> XP</span>
                </div>
                <div>
                    <span class="stat-badge"><i class="bi bi-trophy-fill"></i> <span id="totalScore">0</span>ì </span>
                </div>
            </div>
            <div class="xp-bar mt-2">
                <div class="xp-bar-fill" id="xpBar" style="width: 0%"></div>
            </div>
            <small class="text-muted d-block text-end mt-1">ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ <span id="xpToNext">100</span> XP</small>
        </div>

        <!-- ë©”ì¸ ë©”ë‰´ -->
        <div id="mainMenu" class="game-card">
            <div class="card-header-custom">
                <h2 style="font-size: 2rem;">ğŸ“šâœ¨ English Words âœ¨ğŸ“š</h2>
                <p class="mb-0" style="font-size: 1.1rem;">ğŸ® ì¬ë¯¸ìˆê²Œ ì˜ì–´ ë‹¨ì–´ í•™ìŠµí•˜ê¸°! ğŸ®</p>
                <small class="opacity-75">ğŸŒŸ v1.0.6 ğŸŒŸ</small>
            </div>
            <div class="card-body-custom">
                <div class="row g-3">
                    <div class="col-6">
                        <div class="menu-btn" onclick="startFlashcard()">
                            <div class="icon">ğŸ“š</div>
                            <h4>í”Œë˜ì‹œì¹´ë“œ</h4>
                            <p>ë‹¨ì–´ ì•”ê¸°í•˜ê¸°</p>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="menu-btn" id="quizMenuBtn" onclick="startQuiz()">
                            <div class="icon">ğŸ¯</div>
                            <h4>í€´ì¦ˆ</h4>
                            <p id="quizMenuDesc">ë¨¼ì € í”Œë˜ì‹œì¹´ë“œ í•™ìŠµ!</p>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="menu-btn" onclick="showProgress()">
                            <div class="icon">ğŸ“Š</div>
                            <h4>ì§„í–‰ ìƒí™©</h4>
                            <p>í•™ìŠµ í˜„í™© ë³´ê¸°</p>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="menu-btn" onclick="showSettings()">
                            <div class="icon">âš™ï¸</div>
                            <h4>ì„¤ì •</h4>
                            <p>ë ˆë²¨ ì„ íƒ</p>
                        </div>
                    </div>
                </div>

                <!-- ì†Œë¦¬ í™œì„±í™” ë²„íŠ¼ -->
                <div id="soundEnable" class="mt-3 p-4 rounded-4 text-center" style="background: linear-gradient(135deg, #ffeaa7, #fdcb6e); border: 3px dashed #f39c12;">
                    <button class="btn btn-lg" onclick="enableSound()" style="background: linear-gradient(135deg, #ff9ff3, #f368e0); color: white; border-radius: 25px; font-weight: 800; padding: 15px 30px; box-shadow: 0 8px 25px rgba(243,104,224,0.4); animation: bounce-sound 1s infinite;">
                        ğŸ”Š ì†Œë¦¬ ì¼œê¸° (ë¨¼ì € í´ë¦­!) ğŸµ
                    </button>
                </div>
                <style>
                    @keyframes bounce-sound {
                        0%, 100% { transform: translateY(0); }
                        50% { transform: translateY(-8px); }
                    }
                </style>

                <!-- ì˜¤ëŠ˜ì˜ ëª©í‘œ -->
                <div class="mt-4 p-4 rounded-4" style="background: linear-gradient(135deg, #dfe6e9, #b2bec3); border: 3px solid #74b9ff;">
                    <h6 style="font-weight: 800; color: #2d3436;">ğŸš€ ì˜¤ëŠ˜ì˜ ëª©í‘œ ğŸ¯</h6>
                    <div class="progress progress-custom mb-2" style="height: 20px;">
                        <div class="progress-bar" id="dailyProgress" style="width: 0%"></div>
                    </div>
                    <small style="font-weight: 600; color: #636e72;">â­ <span id="todayLearned">0</span> / <span id="dailyGoal">20</span> ë‹¨ì–´ í•™ìŠµ â­</small>
                </div>
            </div>
        </div>

        <!-- í”Œë˜ì‹œì¹´ë“œ ëª¨ë“œ -->
        <div id="flashcardMode" class="game-card hidden">
            <div class="card-header-custom">
                <div class="d-flex justify-content-between align-items-center">
                    <button class="home-btn" onclick="goHome()">ğŸ </button>
                    <span class="progress-counter">ğŸ“– <span id="fcCurrent">1</span> / <span id="fcTotal">10</span></span>
                    <span class="category-tag" id="fcCategory">ì¹´í…Œê³ ë¦¬</span>
                </div>
            </div>
            <div class="card-body-custom">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <span class="level-badge" id="fcLevel">Lv.1</span>
                    <span class="category-badge" id="fcCategoryBadge">ë™ë¬¼</span>
                    <div id="cardFront">
                        <div class="word" id="fcWord">apple</div>
                        <button class="speak-btn" onclick="event.stopPropagation(); speakWord()">
                            <i class="bi bi-volume-up-fill"></i>
                        </button>
                        <small class="text-muted">ì¹´ë“œë¥¼ íƒ­í•˜ì—¬ ëœ» ë³´ê¸°</small>
                    </div>
                    <div id="cardBack" class="hidden">
                        <div class="meaning" id="fcMeaning">ì‚¬ê³¼</div>
                        <div class="d-flex justify-content-center gap-2 my-2">
                            <button class="speak-btn" onclick="event.stopPropagation(); speakWord()" title="ë‹¨ì–´ ë°œìŒ">
                                <i class="bi bi-volume-up-fill"></i>
                            </button>
                            <button class="speak-btn" onclick="event.stopPropagation(); speakExample()" title="ì˜ˆë¬¸ ë“£ê¸°" style="background: #22c55e;">
                                <i class="bi bi-chat-quote-fill"></i>
                            </button>
                        </div>
                        <div class="example" id="fcExample">"I eat an apple."</div>
                        <small class="text-muted">ğŸ”Š ë‹¨ì–´ | ğŸ’¬ ì˜ˆë¬¸</small>
                    </div>
                </div>

                <div class="d-flex justify-content-between mt-4 gap-3">
                    <button class="btn btn-lg" onclick="markUnknown()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: white; border-radius: 20px; font-weight: 700; padding: 15px 25px; box-shadow: 0 8px 20px rgba(255,107,107,0.4); transition: all 0.3s;">
                        ğŸ˜… ë‹¤ì‹œ ê³µë¶€í• ë˜ìš”
                    </button>
                    <button class="btn btn-lg" onclick="markKnown()" style="background: linear-gradient(135deg, #00d2d3, #10ac84); color: white; border-radius: 20px; font-weight: 700; padding: 15px 25px; box-shadow: 0 8px 20px rgba(0,210,211,0.4); transition: all 0.3s;">
                        ğŸ‰ ì•Œê² ì–´ìš”! (+10 XP)
                    </button>
                </div>

                <div class="progress progress-custom mt-3">
                    <div class="progress-bar" id="fcProgress" style="width: 10%"></div>
                </div>
            </div>
        </div>

        <!-- í€´ì¦ˆ ëª¨ë“œ -->
        <div id="quizMode" class="game-card hidden">
            <div class="card-header-custom">
                <div class="d-flex justify-content-between align-items-center">
                    <button class="home-btn" onclick="goHome()">ğŸ </button>
                    <span class="progress-counter">ğŸ¯ <span id="qCurrent">1</span> / <span id="qTotal">10</span></span>
                    <span class="score-badge">â­ <span id="qScore">0</span>ì </span>
                </div>
            </div>
            <div class="card-body-custom">
                <div class="text-center mb-4">
                    <button class="speak-btn" onclick="speakQuizWord()">
                        <i class="bi bi-volume-up-fill"></i>
                    </button>
                    <h3 class="mt-2" id="quizWord" style="font-size: 2.5rem; font-weight: 900; color: #5f27cd;">apple</h3>
                    <p style="color: #888; font-weight: 600;">ğŸ‘† ìœ„ ë‹¨ì–´ì˜ ëœ»ì€? ğŸ‘†</p>
                </div>

                <div id="quizOptions">
                    <!-- ì˜µì…˜ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>

                <div id="quizFeedback" class="hidden mt-3 p-3 rounded-4">
                    <p id="feedbackText" class="mb-2" style="font-weight: 700; font-size: 1.1rem;"></p>
                    <small id="feedbackExample" style="color: #666;"></small>
                </div>

                <button id="nextQuizBtn" class="btn btn-lg w-100 mt-3 hidden" onclick="nextQuiz()" style="background: linear-gradient(135deg, #00d2d3, #10ac84); color: white; border-radius: 25px; font-weight: 800; padding: 18px; box-shadow: 0 8px 25px rgba(0,210,211,0.4); font-size: 1.2rem;">
                    ë‹¤ìŒ ë¬¸ì œë¡œ! â¡ï¸
                </button>

                <div class="progress progress-custom mt-3">
                    <div class="progress-bar" id="qProgress" style="width: 10%"></div>
                </div>
            </div>
        </div>

        <!-- í”Œë˜ì‹œì¹´ë“œ ì™„ë£Œ -->
        <div id="flashcardComplete" class="game-card hidden">
            <div class="card-body-custom text-center">
                <div class="result-emoji">ğŸ“š</div>
                <h2>í•™ìŠµ ì™„ë£Œ!</h2>
                <p class="text-muted mb-4">
                    <span id="fcLearnedCount">0</span>ê°œ ë‹¨ì–´ë¥¼ í•™ìŠµí–ˆìŠµë‹ˆë‹¤
                </p>

                <div class="p-3 bg-light rounded-3 mb-4">
                    <div class="d-flex justify-content-around">
                        <div>
                            <h4 class="text-success mb-0">+<span id="fcEarnedXP">0</span></h4>
                            <small class="text-muted">íšë“ XP</small>
                        </div>
                        <div>
                            <h4 class="text-primary mb-0"><span id="fcStudiedCount">20</span>ê°œ</h4>
                            <small class="text-muted">í•™ìŠµ ë‹¨ì–´</small>
                        </div>
                    </div>
                </div>

                <div class="d-grid gap-3">
                    <button class="btn btn-lg" onclick="startQuizFromFlashcard()" style="background: linear-gradient(135deg, #feca57, #ff9f43); color: white; border-radius: 25px; font-weight: 800; padding: 18px 30px; box-shadow: 0 10px 30px rgba(254,202,87,0.5); font-size: 1.2rem;">
                        âš¡ ë°©ê¸ˆ í•™ìŠµí•œ ë‹¨ì–´ë¡œ í€´ì¦ˆ! âš¡
                    </button>
                    <button class="btn btn-lg" onclick="goHome()" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; border-radius: 25px; font-weight: 800; padding: 15px 30px; box-shadow: 0 8px 25px rgba(116,185,255,0.4);">
                        ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- í€´ì¦ˆ ê²°ê³¼ -->
        <div id="quizResult" class="game-card hidden">
            <div class="card-body-custom text-center">
                <div class="result-emoji" id="resultEmoji">ğŸ‰</div>
                <h2 id="resultTitle">í›Œë¥­í•´ìš”!</h2>
                <div class="result-score" id="resultScore">8/10</div>
                <p class="text-muted mb-4">ì •ë‹µë¥  <span id="resultPercent">80</span>%</p>

                <div class="p-3 bg-light rounded-3 mb-4">
                    <div class="d-flex justify-content-around">
                        <div>
                            <h4 class="text-success mb-0">+<span id="earnedXP">100</span></h4>
                            <small class="text-muted">íšë“ XP</small>
                        </div>
                        <div>
                            <h4 class="text-primary mb-0">+<span id="earnedScore">80</span></h4>
                            <small class="text-muted">íšë“ ì ìˆ˜</small>
                        </div>
                    </div>
                </div>

                <div class="d-flex gap-3">
                    <button class="btn btn-lg flex-fill" onclick="goHome()" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; border-radius: 20px; font-weight: 800; padding: 15px; box-shadow: 0 8px 20px rgba(116,185,255,0.4);">
                        ğŸ  í™ˆìœ¼ë¡œ
                    </button>
                    <button class="btn btn-lg flex-fill" onclick="retryQuiz()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: white; border-radius: 20px; font-weight: 800; padding: 15px; box-shadow: 0 8px 20px rgba(255,107,107,0.4);">
                        ğŸ”„ ë‹¤ì‹œ ë„ì „!
                    </button>
                </div>
            </div>
        </div>

        <!-- ì§„í–‰ ìƒí™© -->
        <div id="progressView" class="game-card hidden">
            <div class="card-header-custom">
                <div class="d-flex justify-content-between align-items-center">
                    <button class="home-btn" onclick="goHome()">ğŸ </button>
                    <h5 class="mb-0">ğŸ† ë‚˜ì˜ í•™ìŠµ í˜„í™© ğŸ†</h5>
                    <span></span>
                </div>
            </div>
            <div class="card-body-custom">
                <!-- ë­í¬ & ìºë¦­í„° -->
                <div class="rank-card mb-4">
                    <div class="rank-character" id="rankCharacter">ğŸ£</div>
                    <div class="rank-info">
                        <div class="rank-title" id="rankTitle">ìƒˆì‹¹ í•™ìŠµì</div>
                        <div class="rank-subtitle">ë‹¤ìŒ ë­í¬ê¹Œì§€ <span id="wordsToNextRank">10</span>ë‹¨ì–´!</div>
                    </div>
                    <div class="rank-badge" id="rankBadge">ğŸ¥‰</div>
                </div>

                <!-- ë©”ë‹¬ ì»¬ë ‰ì…˜ -->
                <div class="medal-section mb-4">
                    <h6 class="section-title">ğŸ–ï¸ ë©”ë‹¬ ì»¬ë ‰ì…˜</h6>
                    <div class="medal-container">
                        <div class="medal-item">
                            <div class="medal bronze" id="bronzeMedal">ğŸ¥‰</div>
                            <div class="medal-count" id="bronzeCount">0</div>
                            <div class="medal-label">ë™ë©”ë‹¬</div>
                        </div>
                        <div class="medal-item">
                            <div class="medal silver" id="silverMedal">ğŸ¥ˆ</div>
                            <div class="medal-count" id="silverCount">0</div>
                            <div class="medal-label">ì€ë©”ë‹¬</div>
                        </div>
                        <div class="medal-item">
                            <div class="medal gold" id="goldMedal">ğŸ¥‡</div>
                            <div class="medal-count" id="goldCount">0</div>
                            <div class="medal-label">ê¸ˆë©”ë‹¬</div>
                        </div>
                    </div>
                    <div class="medal-hint">í€´ì¦ˆ ì ìˆ˜: 60%â†‘ ë™ë©”ë‹¬ | 80%â†‘ ì€ë©”ë‹¬ | 100% ê¸ˆë©”ë‹¬</div>
                </div>

                <!-- ì—…ì  ë°°ì§€ -->
                <div class="achievement-section mb-4">
                    <h6 class="section-title">ğŸŒŸ ì—…ì  ë°°ì§€</h6>
                    <div class="badge-container" id="achievementBadges">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>
                </div>

                <!-- ìŠ¤íŠ¸ë¦­ í™”ì—¼ -->
                <div class="streak-section mb-4">
                    <div class="streak-flame-container">
                        <div class="streak-flames" id="streakFlames">ğŸ”¥</div>
                        <div class="streak-number" id="streakDays">0</div>
                        <div class="streak-label">ì¼ ì—°ì† í•™ìŠµ!</div>
                    </div>
                    <div class="streak-calendar" id="streakCalendar">
                        <!-- ìµœê·¼ 7ì¼ í‘œì‹œ -->
                    </div>
                </div>

                <!-- ì „ì²´ ì§„í–‰ë¥  -->
                <div class="progress-section mb-4">
                    <h6 class="section-title">ğŸ“š ë‹¨ì–´ ë§ˆìŠ¤í„° ì§„í–‰ë¥ </h6>
                    <div class="master-progress">
                        <div class="progress progress-custom" style="height: 25px;">
                            <div class="progress-bar" id="totalProgress" style="width: 0%"></div>
                        </div>
                        <div class="progress-text">
                            <span class="learned-count"><span id="learnedWords">0</span> / 500 ë‹¨ì–´</span>
                            <span class="learned-percent" id="learnedPercent">0%</span>
                        </div>
                    </div>
                </div>

                <!-- í†µê³„ ì¹´ë“œ -->
                <div class="stats-grid">
                    <div class="stat-card stat-days">
                        <div class="stat-icon">ğŸ“…</div>
                        <div class="stat-value" id="statDays">0</div>
                        <div class="stat-label">ì´ í•™ìŠµì¼</div>
                    </div>
                    <div class="stat-card stat-quizzes">
                        <div class="stat-icon">ğŸ¯</div>
                        <div class="stat-value" id="statQuizzes">0</div>
                        <div class="stat-label">í€´ì¦ˆ ì™„ë£Œ</div>
                    </div>
                    <div class="stat-card stat-accuracy">
                        <div class="stat-icon">âœ¨</div>
                        <div class="stat-value" id="statAccuracy">0%</div>
                        <div class="stat-label">í‰ê·  ì •ë‹µë¥ </div>
                    </div>
                    <div class="stat-card stat-xp">
                        <div class="stat-icon">âš¡</div>
                        <div class="stat-value" id="statTotalXP">0</div>
                        <div class="stat-label">ì´ XP</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„¤ì • -->
        <div id="settingsView" class="game-card hidden">
            <div class="card-header-custom">
                <div class="d-flex justify-content-between align-items-center">
                    <button class="home-btn" onclick="goHome()">ğŸ </button>
                    <h5 class="mb-0">âš™ï¸ ì„¤ì • & ë„ì›€ë§</h5>
                    <span></span>
                </div>
            </div>
            <div class="card-body-custom">
                <!-- íƒ­ ë©”ë‰´ -->
                <div class="settings-tabs mb-4">
                    <button class="settings-tab active" onclick="showSettingsTab('settings')">âš™ï¸ ì„¤ì •</button>
                    <button class="settings-tab" onclick="showSettingsTab('guide')">ğŸ“– ì‚¬ìš©ë²•</button>
                    <button class="settings-tab" onclick="showSettingsTab('features')">ğŸŒŸ ê¸°ëŠ¥</button>
                    <button class="settings-tab" onclick="showSettingsTab('tips')">ğŸ’¡ íŒ</button>
                </div>

                <!-- ì„¤ì • íƒ­ -->
                <div id="settingsTabContent" class="tab-content">
                    <h6 class="section-title">ğŸ“š í•™ìŠµ ë ˆë²¨ ì„ íƒ</h6>
                    <div class="mb-3" id="levelSelect">
                        <!-- ë ˆë²¨ ì„ íƒ ë²„íŠ¼ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>

                    <h6 class="section-title mt-4">ğŸ¯ ì¼ì¼ ëª©í‘œ</h6>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="dailyGoal" id="goal10" value="10">
                        <label class="btn btn-outline-primary" for="goal10">10ê°œ</label>
                        <input type="radio" class="btn-check" name="dailyGoal" id="goal20" value="20" checked>
                        <label class="btn btn-outline-primary" for="goal20">20ê°œ</label>
                        <input type="radio" class="btn-check" name="dailyGoal" id="goal30" value="30">
                        <label class="btn btn-outline-primary" for="goal30">30ê°œ</label>
                    </div>

                    <h6 class="section-title mt-4">ğŸ“– í•™ìŠµ ë‹¨ì–´ ìˆ˜ (í”Œë˜ì‹œì¹´ë“œ & í€´ì¦ˆ)</h6>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="wordCount" id="word10" value="10" checked>
                        <label class="btn btn-outline-primary" for="word10">10ê°œ</label>
                        <input type="radio" class="btn-check" name="wordCount" id="word20" value="20">
                        <label class="btn btn-outline-primary" for="word20">20ê°œ</label>
                        <input type="radio" class="btn-check" name="wordCount" id="word30" value="30">
                        <label class="btn btn-outline-primary" for="word30">30ê°œ</label>
                    </div>

                    <button class="btn btn-lg w-100 mt-4" onclick="saveSettings()" style="background: linear-gradient(135deg, #00d2d3, #10ac84); color: white; border-radius: 20px; font-weight: 800; box-shadow: 0 8px 20px rgba(0,210,211,0.4);">
                        âœ… ì„¤ì • ì €ì¥í•˜ê¸°
                    </button>

                    <hr class="my-4">

                    <button class="btn btn-outline-danger w-100" onclick="resetProgress()">
                        ğŸ—‘ï¸ ì§„í–‰ ìƒí™© ì´ˆê¸°í™”
                    </button>
                </div>

                <!-- ì‚¬ìš©ë²• íƒ­ -->
                <div id="guideTabContent" class="tab-content hidden">
                    <div class="guide-section">
                        <h6 class="guide-title">ğŸš€ ì‹œì‘í•˜ê¸°</h6>
                        <div class="guide-content">
                            <div class="guide-step">
                                <span class="step-number">1</span>
                                <span>ë¨¼ì € <strong>"ğŸ”Š ì†Œë¦¬ ì¼œê¸°"</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ ë°œìŒì„ ë“¤ì„ ìˆ˜ ìˆê²Œ í•´ìš”!</span>
                            </div>
                            <div class="guide-step">
                                <span class="step-number">2</span>
                                <span><strong>ğŸ“š í”Œë˜ì‹œì¹´ë“œ</strong>ë¡œ ìƒˆë¡œìš´ ë‹¨ì–´ë¥¼ ë°°ì›Œìš”</span>
                            </div>
                            <div class="guide-step">
                                <span class="step-number">3</span>
                                <span><strong>ğŸ¯ í€´ì¦ˆ</strong>ë¡œ ë°°ìš´ ë‹¨ì–´ë¥¼ í…ŒìŠ¤íŠ¸í•´ìš”</span>
                            </div>
                            <div class="guide-step">
                                <span class="step-number">4</span>
                                <span><strong>ğŸ“Š ì§„í–‰ ìƒí™©</strong>ì—ì„œ ë©”ë‹¬ê³¼ ì—…ì ì„ í™•ì¸í•´ìš”</span>
                            </div>
                        </div>
                    </div>

                    <div class="guide-section">
                        <h6 class="guide-title">ğŸ“š í”Œë˜ì‹œì¹´ë“œ ì‚¬ìš©ë²•</h6>
                        <div class="guide-content">
                            <p>ğŸ‘† ì¹´ë“œë¥¼ <strong>íƒ­</strong>í•˜ë©´ ëœ»ì´ ë³´ì—¬ìš”</p>
                            <p>ğŸ”Š ìŠ¤í”¼ì»¤ ë²„íŠ¼ìœ¼ë¡œ <strong>ë°œìŒ</strong>ì„ ë“¤ì–´ìš”</p>
                            <p>ğŸ’¬ ë§í’ì„  ë²„íŠ¼ìœ¼ë¡œ <strong>ì˜ˆë¬¸</strong>ì„ ë“¤ì–´ìš”</p>
                            <p>âœ… ì•Œë©´ <strong>"ì•Œê² ì–´ìš”"</strong> â†’ XP íšë“!</p>
                            <p>ğŸ”„ ëª¨ë¥´ë©´ <strong>"ë‹¤ì‹œ ê³µë¶€í• ë˜ìš”"</strong></p>
                        </div>
                    </div>

                    <div class="guide-section">
                        <h6 class="guide-title">ğŸ¯ í€´ì¦ˆ ì‚¬ìš©ë²•</h6>
                        <div class="guide-content">
                            <p>ğŸ“ ì˜ì–´ ë‹¨ì–´ë¥¼ ë³´ê³  <strong>ëœ»ì„ ì„ íƒ</strong>í•´ìš”</p>
                            <p>ğŸ”Š ë‹¨ì–´ ë°œìŒì„ <strong>ë“¤ìœ¼ë©´ì„œ</strong> í’€ì–´ìš”</p>
                            <p>â­ ì •ë‹µì„ ë§íˆë©´ <strong>XPì™€ ì ìˆ˜</strong>ë¥¼ ë°›ì•„ìš”</p>
                            <p>ğŸ… ì ìˆ˜ì— ë”°ë¼ <strong>ë©”ë‹¬</strong>ì„ ë°›ì•„ìš”!</p>
                        </div>
                    </div>
                </div>

                <!-- ê¸°ëŠ¥ íƒ­ -->
                <div id="featuresTabContent" class="tab-content hidden">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ–ï¸</div>
                        <div class="feature-info">
                            <h6>ë©”ë‹¬ ì‹œìŠ¤í…œ</h6>
                            <p>í€´ì¦ˆ ì ìˆ˜ì— ë”°ë¼ ë©”ë‹¬ì„ ë°›ì•„ìš”!</p>
                            <div class="feature-detail">
                                ğŸ¥‰ 60% ì´ìƒ â†’ ë™ë©”ë‹¬<br>
                                ğŸ¥ˆ 80% ì´ìƒ â†’ ì€ë©”ë‹¬<br>
                                ğŸ¥‡ 100% â†’ ê¸ˆë©”ë‹¬
                            </div>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">ğŸ£</div>
                        <div class="feature-info">
                            <h6>ë­í¬ ì‹œìŠ¤í…œ</h6>
                            <p>ë‹¨ì–´ë¥¼ ë§ì´ ë°°ìš¸ìˆ˜ë¡ ìºë¦­í„°ê°€ ì„±ì¥í•´ìš”!</p>
                            <div class="feature-detail">
                                ğŸ£â†’ğŸ¥â†’ğŸ¤â†’ğŸ”â†’ğŸ¦…â†’ğŸ¦‹â†’ğŸ‰â†’ğŸ¦„â†’ğŸ‘‘â†’ğŸŒŸ
                            </div>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">ğŸŒŸ</div>
                        <div class="feature-info">
                            <h6>ì—…ì  ë°°ì§€</h6>
                            <p>íŠ¹ë³„í•œ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ë©´ ë°°ì§€ë¥¼ ë°›ì•„ìš”!</p>
                            <div class="feature-detail">
                                ğŸ® ì²« í€´ì¦ˆ | ğŸ’¯ 100ì  | ğŸ”¥ ì—°ì†í•™ìŠµ<br>
                                ğŸ“š ë‹¨ì–´ë°•ì‚¬ | ğŸŒ… ì•„ì¹¨í˜• | ğŸ¦‰ ë°¤ì˜í•™ìŠµì
                            </div>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”¥</div>
                        <div class="feature-info">
                            <h6>ìŠ¤íŠ¸ë¦­ (ì—°ì† í•™ìŠµ)</h6>
                            <p>ë§¤ì¼ í•™ìŠµí•˜ë©´ ë¶ˆê½ƒì´ ì»¤ì ¸ìš”!</p>
                            <div class="feature-detail">
                                1ì¼ ğŸ”¥ | 3ì¼ ğŸ”¥ğŸ”¥ | 7ì¼ ğŸ”¥ğŸ”¥ğŸ”¥ | 14ì¼+ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
                            </div>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">âš¡</div>
                        <div class="feature-info">
                            <h6>XP & ë ˆë²¨</h6>
                            <p>í•™ìŠµí•˜ë©´ XPë¥¼ ë°›ê³  ë ˆë²¨ì—…í•´ìš”!</p>
                            <div class="feature-detail">
                                í”Œë˜ì‹œì¹´ë“œ +10 XP<br>
                                í€´ì¦ˆ ì •ë‹µ +20 XP
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íŒ íƒ­ -->
                <div id="tipsTabContent" class="tab-content hidden">
                    <div class="tip-card tip-important">
                        <div class="tip-icon">ğŸ’¡</div>
                        <div class="tip-content">
                            <strong>ë§¤ì¼ ì¡°ê¸ˆì”©!</strong><br>
                            í•˜ë£¨ 10ë¶„ì´ë¼ë„ ë§¤ì¼ í•™ìŠµí•˜ë©´ ìŠ¤íŠ¸ë¦­ ë³´ë„ˆìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ìš”!
                        </div>
                    </div>

                    <div class="tip-card">
                        <div class="tip-icon">ğŸ§</div>
                        <div class="tip-content">
                            <strong>ë°œìŒ ë“£ê¸°</strong><br>
                            ë‹¨ì–´ë¥¼ ëˆˆìœ¼ë¡œë§Œ ë³´ì§€ ë§ê³ , ê¼­ ë°œìŒì„ ë“¤ìœ¼ë©´ì„œ ë”°ë¼ ë§í•´ë³´ì„¸ìš”!
                        </div>
                    </div>

                    <div class="tip-card">
                        <div class="tip-icon">ğŸ“š</div>
                        <div class="tip-content">
                            <strong>í”Œë˜ì‹œì¹´ë“œ â†’ í€´ì¦ˆ</strong><br>
                            í”Œë˜ì‹œì¹´ë“œë¡œ ë¨¼ì € í•™ìŠµí•˜ê³ , ë°”ë¡œ í€´ì¦ˆë¡œ í…ŒìŠ¤íŠ¸í•˜ë©´ ê¸°ì–µì— ì˜¤ë˜ ë‚¨ì•„ìš”!
                        </div>
                    </div>

                    <div class="tip-card">
                        <div class="tip-icon">ğŸ“–</div>
                        <div class="tip-content">
                            <strong>ì˜ˆë¬¸ í™œìš©</strong><br>
                            ë‹¨ì–´ë§Œ ì™¸ìš°ì§€ ë§ê³ , ì˜ˆë¬¸ë„ í•¨ê»˜ ì½ì–´ë³´ì„¸ìš”. ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆì–´ìš”!
                        </div>
                    </div>

                    <div class="tip-card">
                        <div class="tip-icon">ğŸ¯</div>
                        <div class="tip-content">
                            <strong>ë ˆë²¨ ì„ íƒ</strong><br>
                            ë„ˆë¬´ ì–´ë ¤ìš°ë©´ ë‚®ì€ ë ˆë²¨ë¶€í„°, ì‰¬ìš°ë©´ ë†’ì€ ë ˆë²¨ì„ ì„ íƒí•˜ì„¸ìš”!
                        </div>
                    </div>

                    <div class="tip-card">
                        <div class="tip-icon">ğŸ†</div>
                        <div class="tip-content">
                            <strong>ê¸ˆë©”ë‹¬ ë„ì „</strong><br>
                            100ì ì„ ë§ìœ¼ë©´ ê¸ˆë©”ë‹¬! í‹€ë¦° ë¬¸ì œëŠ” ë‹¤ì‹œ í•™ìŠµí•˜ê³  ë„ì „í•´ë³´ì„¸ìš”!
                        </div>
                    </div>

                    <div class="tip-card tip-fun">
                        <div class="tip-icon">ğŸ®</div>
                        <div class="tip-content">
                            <strong>ê²Œì„ì²˜ëŸ¼ ì¦ê¸°ê¸°</strong><br>
                            ê³µë¶€ê°€ ì•„ë‹ˆë¼ ê²Œì„ì´ì—ìš”! ë©”ë‹¬ ëª¨ìœ¼ê¸°, ì—…ì  ë‹¬ì„±í•˜ê¸°, ë­í¬ ì˜¬ë¦¬ê¸°ë¥¼ ëª©í‘œë¡œ ì¦ê²¨ë³´ì„¸ìš”!
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="words.js"></script>
    <script>
        // ===== ê²Œì„ ìƒíƒœ =====
        let gameState = {
            xp: 0,
            level: 1,
            totalScore: 0,
            streak: 0,
            lastStudyDate: null,
            todayLearned: 0,
            dailyGoal: 20,
            wordCount: 10,
            selectedLevels: [1, 2, 3, 4, 5],
            learnedWords: [],
            quizzesCompleted: 0,
            totalCorrect: 0,
            totalAnswered: 0,
            // ë©”ë‹¬ ì‹œìŠ¤í…œ
            medals: {
                bronze: 0,  // 60% ì´ìƒ
                silver: 0,  // 80% ì´ìƒ
                gold: 0     // 100%
            },
            // ì—…ì  ì‹œìŠ¤í…œ
            achievements: {
                firstQuiz: false,      // ì²« í€´ì¦ˆ ì™„ë£Œ
                perfectScore: false,   // 100ì  ë‹¬ì„±
                streak3: false,        // 3ì¼ ì—°ì† í•™ìŠµ
                streak7: false,        // 7ì¼ ì—°ì† í•™ìŠµ
                words50: false,        // 50ë‹¨ì–´ í•™ìŠµ
                words100: false,       // 100ë‹¨ì–´ í•™ìŠµ
                words200: false,       // 200ë‹¨ì–´ í•™ìŠµ
                quiz10: false,         // í€´ì¦ˆ 10íšŒ ì™„ë£Œ
                quiz50: false,         // í€´ì¦ˆ 50íšŒ ì™„ë£Œ
                earlyBird: false,      // ì•„ì¹¨ í•™ìŠµ (6-9ì‹œ)
                nightOwl: false,       // ë°¤ í•™ìŠµ (21-24ì‹œ)
                speedster: false       // ë¹ ë¥¸ ì •ë‹µ (êµ¬í˜„ ì˜ˆì •)
            },
            // í•™ìŠµ ê¸°ë¡
            studyDates: []  // í•™ìŠµí•œ ë‚ ì§œ ë°°ì—´
        };

        // ì—…ì  ì •ì˜
        const achievementDefs = {
            firstQuiz: { icon: 'ğŸ®', name: 'ì²« ë„ì „', desc: 'ì²« í€´ì¦ˆ ì™„ë£Œ!' },
            perfectScore: { icon: 'ğŸ’¯', name: 'ì™„ë²½í•´ìš”', desc: 'í€´ì¦ˆ 100ì !' },
            streak3: { icon: 'ğŸ”¥', name: 'ë¶ˆê½ƒ ì‹œì‘', desc: '3ì¼ ì—°ì† í•™ìŠµ' },
            streak7: { icon: 'ğŸŒŸ', name: 'ì¼ì£¼ì¼ ë§ˆìŠ¤í„°', desc: '7ì¼ ì—°ì† í•™ìŠµ' },
            words50: { icon: 'ğŸ“–', name: 'ë‹¨ì–´ ìˆ˜ì§‘ê°€', desc: '50ë‹¨ì–´ í•™ìŠµ' },
            words100: { icon: 'ğŸ“š', name: 'ë‹¨ì–´ ë°•ì‚¬', desc: '100ë‹¨ì–´ í•™ìŠµ' },
            words200: { icon: 'ğŸ“', name: 'ë‹¨ì–´ ì²œì¬', desc: '200ë‹¨ì–´ í•™ìŠµ' },
            quiz10: { icon: 'ğŸ¯', name: 'í€´ì¦ˆ ë„ì „ì', desc: 'í€´ì¦ˆ 10íšŒ ì™„ë£Œ' },
            quiz50: { icon: 'ğŸ…', name: 'í€´ì¦ˆ ë§ˆìŠ¤í„°', desc: 'í€´ì¦ˆ 50íšŒ ì™„ë£Œ' },
            earlyBird: { icon: 'ğŸŒ…', name: 'ì•„ì¹¨í˜• í•™ìŠµì', desc: 'ì•„ì¹¨ì— í•™ìŠµ' },
            nightOwl: { icon: 'ğŸ¦‰', name: 'ë°¤ì˜ í•™ìŠµì', desc: 'ë°¤ì— í•™ìŠµ' },
            speedster: { icon: 'âš¡', name: 'ë²ˆê°œì†', desc: 'ë¹ ë¥¸ ì •ë‹µ' }
        };

        // ë­í¬ ì •ì˜
        const rankDefs = [
            { min: 0, char: 'ğŸ£', title: 'ìƒˆì‹¹ í•™ìŠµì', badge: 'ğŸ¥‰' },
            { min: 10, char: 'ğŸ¥', title: 'ì•„ê¸° ë³‘ì•„ë¦¬', badge: 'ğŸ¥‰' },
            { min: 30, char: 'ğŸ¤', title: 'ê·€ì—¬ìš´ ë³‘ì•„ë¦¬', badge: 'ğŸ¥ˆ' },
            { min: 50, char: 'ğŸ”', title: 'ì”©ì”©í•œ ë‹­', badge: 'ğŸ¥ˆ' },
            { min: 100, char: 'ğŸ¦…', title: 'ë‚ ê°œ ë‹¬ë¦° ë…ìˆ˜ë¦¬', badge: 'ğŸ¥‡' },
            { min: 150, char: 'ğŸ¦‹', title: 'ì•„ë¦„ë‹¤ìš´ ë‚˜ë¹„', badge: 'ğŸ¥‡' },
            { min: 200, char: 'ğŸ‰', title: 'ìš©ê°í•œ ë“œë˜ê³¤', badge: 'ğŸ†' },
            { min: 300, char: 'ğŸ¦„', title: 'ì „ì„¤ì˜ ìœ ë‹ˆì½˜', badge: 'ğŸ†' },
            { min: 400, char: 'ğŸ‘‘', title: 'ë‹¨ì–´ì˜ ì™•', badge: 'ğŸ‘‘' },
            { min: 500, char: 'ğŸŒŸ', title: 'ì™„ë²½í•œ ë§ˆìŠ¤í„°', badge: 'ğŸ’' }
        ];

        // í”Œë˜ì‹œì¹´ë“œ ìƒíƒœ
        let fcState = {
            words: [],
            currentIndex: 0,
            isFlipped: false,
            studiedWords: [],  // í•™ìŠµí•œ ë‹¨ì–´ë“¤
            earnedXP: 0,       // íšë“í•œ XP
            completed: false   // í”Œë˜ì‹œì¹´ë“œ ì™„ë£Œ ì—¬ë¶€
        };

        // í€´ì¦ˆ ìƒíƒœ
        let quizState = {
            words: [],
            currentIndex: 0,
            score: 0,
            answered: false,
            currentWord: null
        };

        // ===== ì´ˆê¸°í™” =====
        function init() {
            loadGameState();
            updateUI();
            checkStreak();
            updateQuizButton();
        }

        function loadGameState() {
            const saved = localStorage.getItem('englishWordsGame');
            if (saved) {
                const parsed = JSON.parse(saved);
                // ê¸°ì¡´ quizCountë¥¼ wordCountë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
                if (parsed.quizCount && !parsed.wordCount) {
                    parsed.wordCount = parsed.quizCount;
                    delete parsed.quizCount;
                }
                gameState = { ...gameState, ...parsed };
            }
        }

        function saveGameState() {
            localStorage.setItem('englishWordsGame', JSON.stringify(gameState));
        }

        function checkStreak() {
            const today = new Date().toDateString();
            if (gameState.lastStudyDate !== today) {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                if (gameState.lastStudyDate === yesterday.toDateString()) {
                    // ì—°ì† í•™ìŠµ ìœ ì§€
                } else if (gameState.lastStudyDate !== null) {
                    gameState.streak = 0; // ìŠ¤íŠ¸ë¦­ ë¦¬ì…‹
                }
                gameState.todayLearned = 0;
            }
        }

        // ===== UI ì—…ë°ì´íŠ¸ =====
        function updateUI() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('xp').textContent = gameState.xp;
            document.getElementById('totalScore').textContent = gameState.totalScore;
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('todayLearned').textContent = gameState.todayLearned;
            document.getElementById('dailyGoal').textContent = gameState.dailyGoal;

            // XP ë°” ì—…ë°ì´íŠ¸
            const xpForLevel = gameState.level * 100;
            const xpProgress = (gameState.xp % xpForLevel) / xpForLevel * 100;
            document.getElementById('xpBar').style.width = xpProgress + '%';
            document.getElementById('xpToNext').textContent = xpForLevel - (gameState.xp % xpForLevel);

            // ì¼ì¼ ëª©í‘œ ì§„í–‰ë¥ 
            const dailyProgress = Math.min((gameState.todayLearned / gameState.dailyGoal) * 100, 100);
            document.getElementById('dailyProgress').style.width = dailyProgress + '%';
        }

        function addXP(amount) {
            gameState.xp += amount;
            const xpForLevel = gameState.level * 100;

            while (gameState.xp >= xpForLevel * gameState.level) {
                gameState.level++;
                showLevelUp();
            }

            updateUI();
            saveGameState();
        }

        function showLevelUp() {
            alert(`ğŸ‰ ë ˆë²¨ì—…! Level ${gameState.level} ë‹¬ì„±!`);
        }

        // ===== ë„¤ë¹„ê²Œì´ì…˜ =====
        function goHome() {
            hideAll();
            document.getElementById('mainMenu').classList.remove('hidden');
            updateUI();
            updateQuizButton();
        }

        function hideAll() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('flashcardMode').classList.add('hidden');
            document.getElementById('flashcardComplete').classList.add('hidden');
            document.getElementById('quizMode').classList.add('hidden');
            document.getElementById('quizResult').classList.add('hidden');
            document.getElementById('progressView').classList.add('hidden');
            document.getElementById('settingsView').classList.add('hidden');
        }

        // ===== í”Œë˜ì‹œì¹´ë“œ =====
        function startFlashcard() {
            hideAll();
            document.getElementById('flashcardMode').classList.remove('hidden');

            // ì„ íƒëœ ë ˆë²¨ì˜ ë‹¨ì–´ í•„í„°ë§
            fcState.words = wordDatabase.filter(w => gameState.selectedLevels.includes(w.level));
            shuffleArray(fcState.words);
            fcState.words = fcState.words.slice(0, gameState.wordCount); // ì„¤ì •ëœ ë‹¨ì–´ ìˆ˜ë§Œí¼
            fcState.currentIndex = 0;
            fcState.isFlipped = false;
            fcState.studiedWords = [];  // í•™ìŠµí•œ ë‹¨ì–´ ì´ˆê¸°í™”
            fcState.earnedXP = 0;       // íšë“ XP ì´ˆê¸°í™”
            fcState.completed = false;  // ì™„ë£Œ ìƒíƒœ ì´ˆê¸°í™”

            showFlashcard();
        }

        function showFlashcard() {
            const word = fcState.words[fcState.currentIndex];
            document.getElementById('fcWord').textContent = word.word;
            document.getElementById('fcMeaning').textContent = word.meaning;
            document.getElementById('fcExample').textContent = `"${word.example}"`;
            document.getElementById('fcLevel').textContent = `Lv.${word.level}`;
            document.getElementById('fcCategoryBadge').textContent = word.category;
            document.getElementById('fcCurrent').textContent = fcState.currentIndex + 1;
            document.getElementById('fcTotal').textContent = fcState.words.length;

            // ì¹´ë“œ ì•ë©´ ë³´ì´ê¸°
            document.getElementById('cardFront').classList.remove('hidden');
            document.getElementById('cardBack').classList.add('hidden');
            fcState.isFlipped = false;

            // ì§„í–‰ë¥ 
            const progress = ((fcState.currentIndex + 1) / fcState.words.length) * 100;
            document.getElementById('fcProgress').style.width = progress + '%';
        }

        function flipCard() {
            fcState.isFlipped = !fcState.isFlipped;
            if (fcState.isFlipped) {
                document.getElementById('cardFront').classList.add('hidden');
                document.getElementById('cardBack').classList.remove('hidden');
            } else {
                document.getElementById('cardFront').classList.remove('hidden');
                document.getElementById('cardBack').classList.add('hidden');
            }
        }

        function markKnown() {
            const word = fcState.words[fcState.currentIndex];
            if (!gameState.learnedWords.includes(word.word)) {
                gameState.learnedWords.push(word.word);
            }
            // í•™ìŠµí•œ ë‹¨ì–´ ì¶”ì 
            fcState.studiedWords.push(word);
            fcState.earnedXP += 10;

            addXP(10);
            gameState.totalScore += 10;
            gameState.todayLearned++;
            gameState.lastStudyDate = new Date().toDateString();
            if (gameState.todayLearned === 1) gameState.streak++;

            // í•™ìŠµì¼ ê¸°ë¡ ë° ì—…ì  ì²´í¬
            recordStudyDate();
            checkAchievements();

            saveGameState();
            nextFlashcard();
        }

        function markUnknown() {
            // ëª¨ë¥´ëŠ” ë‹¨ì–´ë„ í€´ì¦ˆ ëŒ€ìƒì— í¬í•¨
            const word = fcState.words[fcState.currentIndex];
            fcState.studiedWords.push(word);
            nextFlashcard();
        }

        function nextFlashcard() {
            fcState.currentIndex++;
            if (fcState.currentIndex >= fcState.words.length) {
                showFlashcardComplete();
            } else {
                showFlashcard();
            }
        }

        function showFlashcardComplete() {
            hideAll();
            document.getElementById('flashcardComplete').classList.remove('hidden');

            const learnedCount = fcState.studiedWords.filter(w =>
                gameState.learnedWords.includes(w.word)
            ).length;

            document.getElementById('fcLearnedCount').textContent = learnedCount;
            document.getElementById('fcEarnedXP').textContent = fcState.earnedXP;
            document.getElementById('fcStudiedCount').textContent = fcState.studiedWords.length;

            // í”Œë˜ì‹œì¹´ë“œ ì™„ë£Œ í‘œì‹œ ë° í€´ì¦ˆ ë²„íŠ¼ í™œì„±í™”
            fcState.completed = true;
            updateQuizButton();
        }

        function startQuizFromFlashcard() {
            hideAll();
            document.getElementById('quizMode').classList.remove('hidden');

            // ë°©ê¸ˆ í•™ìŠµí•œ ë‹¨ì–´ë¡œ í€´ì¦ˆ!
            quizState.words = [...fcState.studiedWords];
            shuffleArray(quizState.words);
            quizState.currentIndex = 0;
            quizState.score = 0;
            quizState.answered = false;

            document.getElementById('qTotal').textContent = quizState.words.length;
            showQuiz();
        }

        function speakWord() {
            const word = fcState.words[fcState.currentIndex];
            speak(word.word, 'audio/words/' + encodeURIComponent(word.word) + '.mp3');
        }

        function speakExample() {
            const word = fcState.words[fcState.currentIndex];
            speak(word.example, 'audio/examples/' + encodeURIComponent(word.word) + '.mp3');
        }

        // ===== í€´ì¦ˆ =====
        function startQuiz() {
            // í”Œë˜ì‹œì¹´ë“œ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
            if (!fcState.completed || fcState.studiedWords.length === 0) {
                alert('ğŸ¯ í€´ì¦ˆë¥¼ ì‹œì‘í•˜ë ¤ë©´ ë¨¼ì € í”Œë˜ì‹œì¹´ë“œë¡œ ë‹¨ì–´ë¥¼ í•™ìŠµí•´ì£¼ì„¸ìš”!');
                return;
            }

            hideAll();
            document.getElementById('quizMode').classList.remove('hidden');

            // í”Œë˜ì‹œì¹´ë“œì—ì„œ í•™ìŠµí•œ ë‹¨ì–´ë¡œ í€´ì¦ˆ ì§„í–‰
            quizState.words = [...fcState.studiedWords];
            shuffleArray(quizState.words);
            quizState.currentIndex = 0;
            quizState.score = 0;
            quizState.answered = false;

            showQuiz();
        }

        function showQuiz() {
            const word = quizState.words[quizState.currentIndex];
            quizState.currentWord = word;
            quizState.answered = false;

            document.getElementById('quizWord').textContent = word.word;
            document.getElementById('qCurrent').textContent = quizState.currentIndex + 1;
            document.getElementById('qTotal').textContent = quizState.words.length;
            document.getElementById('qScore').textContent = quizState.score;

            // ì˜µì…˜ ìƒì„±
            const options = generateOptions(word);
            const optionsHtml = options.map((opt, i) => `
                <div class="quiz-option" onclick="selectAnswer(${i}, '${opt.replace(/'/g, "\\'")}')">${opt}</div>
            `).join('');
            document.getElementById('quizOptions').innerHTML = optionsHtml;

            // í”¼ë“œë°± ìˆ¨ê¸°ê¸°
            document.getElementById('quizFeedback').classList.add('hidden');
            document.getElementById('nextQuizBtn').classList.add('hidden');

            // ì§„í–‰ë¥ 
            const progress = ((quizState.currentIndex + 1) / quizState.words.length) * 100;
            document.getElementById('qProgress').style.width = progress + '%';
        }

        function generateOptions(correctWord) {
            const options = [correctWord.meaning];
            const otherWords = wordDatabase.filter(w => w.meaning !== correctWord.meaning);
            shuffleArray(otherWords);

            for (let i = 0; i < 3 && i < otherWords.length; i++) {
                options.push(otherWords[i].meaning);
            }

            shuffleArray(options);
            return options;
        }

        function selectAnswer(index, selected) {
            if (quizState.answered) return;
            quizState.answered = true;

            const correct = quizState.currentWord.meaning;
            const options = document.querySelectorAll('.quiz-option');

            options.forEach((opt, i) => {
                opt.classList.add('disabled');
                if (opt.textContent === correct) {
                    opt.classList.add('correct');
                } else if (i === index && selected !== correct) {
                    opt.classList.add('wrong');
                }
            });

            const feedback = document.getElementById('quizFeedback');
            const feedbackText = document.getElementById('feedbackText');
            const feedbackExample = document.getElementById('feedbackExample');

            gameState.totalAnswered++;

            if (selected === correct) {
                quizState.score++;
                gameState.totalCorrect++;
                feedback.className = 'mt-3 p-3 rounded-3 bg-success bg-opacity-10';
                feedbackText.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i> ì •ë‹µì…ë‹ˆë‹¤! +20 XP';
                // ì¶•í•˜ íš¨ê³¼!
                celebrate();
            } else {
                feedback.className = 'mt-3 p-3 rounded-3 bg-danger bg-opacity-10';
                feedbackText.innerHTML = `<i class="bi bi-x-circle-fill text-danger"></i> ì˜¤ë‹µ! ì •ë‹µ: ${correct}`;
            }

            feedbackExample.textContent = `ì˜ˆë¬¸: ${quizState.currentWord.example}`;
            feedback.classList.remove('hidden');
            document.getElementById('nextQuizBtn').classList.remove('hidden');

            saveGameState();
        }

        function nextQuiz() {
            quizState.currentIndex++;
            if (quizState.currentIndex >= quizState.words.length) {
                showQuizResult();
            } else {
                showQuiz();
            }
        }

        function showQuizResult() {
            hideAll();
            document.getElementById('quizResult').classList.remove('hidden');

            const total = quizState.words.length;
            const score = quizState.score;
            const percent = Math.round((score / total) * 100);
            const earnedXP = score * 20;
            const earnedScore = score * 10;

            // ê²°ê³¼ì— ë”°ë¥¸ ì´ëª¨ì§€ì™€ ë©”ë‹¬
            let emoji = 'ğŸ˜¢';
            let title = 'ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!';
            let medalText = '';

            if (percent === 100) {
                emoji = 'ğŸ¥‡';
                title = 'ì™„ë²½í•´ìš”! ê¸ˆë©”ë‹¬!';
                medalText = 'ğŸ¥‡ ê¸ˆë©”ë‹¬ íšë“!';
            } else if (percent >= 80) {
                emoji = 'ğŸ¥ˆ';
                title = 'í›Œë¥­í•´ìš”! ì€ë©”ë‹¬!';
                medalText = 'ğŸ¥ˆ ì€ë©”ë‹¬ íšë“!';
            } else if (percent >= 60) {
                emoji = 'ğŸ¥‰';
                title = 'ì˜í–ˆì–´ìš”! ë™ë©”ë‹¬!';
                medalText = 'ğŸ¥‰ ë™ë©”ë‹¬ íšë“!';
            } else if (percent >= 50) {
                emoji = 'ğŸ‘';
                title = 'ì¡°ê¸ˆë§Œ ë” í˜ë‚´ìš”!';
            }

            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultScore').textContent = `${score}/${total}`;
            document.getElementById('resultPercent').textContent = percent;
            document.getElementById('earnedXP').textContent = earnedXP;
            document.getElementById('earnedScore').textContent = earnedScore;

            // ë©”ë‹¬ ìˆ˜ì—¬
            awardMedal(percent);

            // XP ë° ì ìˆ˜ ì¶”ê°€
            addXP(earnedXP);
            gameState.totalScore += earnedScore;
            gameState.quizzesCompleted++;
            gameState.todayLearned += score;
            gameState.lastStudyDate = new Date().toDateString();
            if (gameState.todayLearned <= score) gameState.streak++;

            // í•™ìŠµì¼ ê¸°ë¡
            recordStudyDate();

            // ì—…ì  ì²´í¬
            checkAchievements();

            saveGameState();

            // ë©”ë‹¬ íšë“ ì‹œ ì¶”ê°€ ì¶•í•˜ íš¨ê³¼
            if (percent >= 60 && typeof confetti !== 'undefined') {
                setTimeout(() => {
                    confetti({
                        particleCount: 150,
                        spread: 100,
                        origin: { y: 0.6 },
                        colors: percent === 100 ? ['#FFD700', '#FFA500'] :
                                percent >= 80 ? ['#C0C0C0', '#A8A8A8'] :
                                ['#CD7F32', '#B87333']
                    });
                }, 500);
            }
        }

        function speakQuizWord() {
            speak(quizState.currentWord.word, 'audio/words/' + encodeURIComponent(quizState.currentWord.word) + '.mp3');
        }

        // í€´ì¦ˆ ë‹¤ì‹œ ë„ì „ (ê°™ì€ ë‹¨ì–´ë¡œ)
        function retryQuiz() {
            hideAll();
            document.getElementById('quizMode').classList.remove('hidden');

            // ê°™ì€ ë‹¨ì–´ë¡œ í€´ì¦ˆ ì¬ì‹œì‘
            shuffleArray(quizState.words);
            quizState.currentIndex = 0;
            quizState.score = 0;
            quizState.answered = false;

            showQuiz();
        }

        // í€´ì¦ˆ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateQuizButton() {
            const quizBtn = document.getElementById('quizMenuBtn');
            const quizDesc = document.getElementById('quizMenuDesc');

            if (fcState.completed && fcState.studiedWords.length > 0) {
                quizBtn.style.opacity = '1';
                quizBtn.style.pointerEvents = 'auto';
                quizDesc.textContent = 'ì‹¤ë ¥ í…ŒìŠ¤íŠ¸';
                quizBtn.classList.add('quiz-ready');
            } else {
                quizBtn.style.opacity = '0.6';
                quizDesc.textContent = 'ë¨¼ì € í”Œë˜ì‹œì¹´ë“œ í•™ìŠµ!';
                quizBtn.classList.remove('quiz-ready');
            }
        }

        // ===== ì§„í–‰ ìƒí™© =====
        function showProgress() {
            hideAll();
            document.getElementById('progressView').classList.remove('hidden');

            const learned = gameState.learnedWords.length;
            const total = 500;
            const percent = Math.round((learned / total) * 100);

            // ì „ì²´ ì§„í–‰ë¥ 
            document.getElementById('learnedWords').textContent = learned;
            document.getElementById('totalProgress').style.width = percent + '%';
            document.getElementById('learnedPercent').textContent = percent + '%';

            // ë­í¬ ì—…ë°ì´íŠ¸
            updateRankDisplay(learned);

            // ë©”ë‹¬ í‘œì‹œ
            document.getElementById('bronzeCount').textContent = gameState.medals.bronze;
            document.getElementById('silverCount').textContent = gameState.medals.silver;
            document.getElementById('goldCount').textContent = gameState.medals.gold;

            // ì—…ì  ë°°ì§€ ìƒì„±
            renderAchievements();

            // ìŠ¤íŠ¸ë¦­ í‘œì‹œ
            document.getElementById('streakDays').textContent = gameState.streak;
            updateStreakFlames();
            renderStreakCalendar();

            // í†µê³„
            document.getElementById('statDays').textContent = gameState.studyDates ? gameState.studyDates.length : 0;
            document.getElementById('statQuizzes').textContent = gameState.quizzesCompleted;
            document.getElementById('statTotalXP').textContent = gameState.xp;
            const accuracy = gameState.totalAnswered > 0
                ? Math.round((gameState.totalCorrect / gameState.totalAnswered) * 100)
                : 0;
            document.getElementById('statAccuracy').textContent = accuracy + '%';
        }

        // ë­í¬ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateRankDisplay(learned) {
            let currentRank = rankDefs[0];
            let nextRank = rankDefs[1];

            for (let i = rankDefs.length - 1; i >= 0; i--) {
                if (learned >= rankDefs[i].min) {
                    currentRank = rankDefs[i];
                    nextRank = rankDefs[i + 1] || null;
                    break;
                }
            }

            document.getElementById('rankCharacter').textContent = currentRank.char;
            document.getElementById('rankTitle').textContent = currentRank.title;
            document.getElementById('rankBadge').textContent = currentRank.badge;

            if (nextRank) {
                const wordsNeeded = nextRank.min - learned;
                document.getElementById('wordsToNextRank').textContent = wordsNeeded;
            } else {
                document.querySelector('.rank-subtitle').textContent = 'ğŸ‰ ìµœê³  ë­í¬ ë‹¬ì„±!';
            }
        }

        // ì—…ì  ë Œë”ë§
        function renderAchievements() {
            const container = document.getElementById('achievementBadges');
            let html = '';

            for (const [key, def] of Object.entries(achievementDefs)) {
                const unlocked = gameState.achievements[key];
                html += `
                    <div class="achievement-badge ${unlocked ? 'unlocked' : 'locked'}"
                         title="${def.name}: ${def.desc}">
                        ${def.icon}
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // ìŠ¤íŠ¸ë¦­ í™”ì—¼ ì—…ë°ì´íŠ¸
        function updateStreakFlames() {
            const streak = gameState.streak;
            let flames = 'ğŸ”¥';

            if (streak >= 30) flames = 'ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥';
            else if (streak >= 14) flames = 'ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥';
            else if (streak >= 7) flames = 'ğŸ”¥ğŸ”¥ğŸ”¥';
            else if (streak >= 3) flames = 'ğŸ”¥ğŸ”¥';

            document.getElementById('streakFlames').textContent = flames;
        }

        // ìŠ¤íŠ¸ë¦­ ìº˜ë¦°ë” ë Œë”ë§
        function renderStreakCalendar() {
            const container = document.getElementById('streakCalendar');
            const today = new Date();
            const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            let html = '';

            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                const dateStr = date.toDateString();
                const dayName = dayNames[date.getDay()];
                const isCompleted = gameState.studyDates && gameState.studyDates.includes(dateStr);
                const isToday = i === 0;

                html += `
                    <div class="streak-day ${isCompleted ? 'completed' : ''} ${isToday ? 'today' : ''}">
                        ${isCompleted ? 'âœ“' : dayName}
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // ì—…ì  ì²´í¬ ë° í•´ê¸ˆ
        function checkAchievements() {
            const learned = gameState.learnedWords.length;
            const hour = new Date().getHours();

            // ë‹¨ì–´ ê´€ë ¨ ì—…ì 
            if (learned >= 50 && !gameState.achievements.words50) {
                unlockAchievement('words50');
            }
            if (learned >= 100 && !gameState.achievements.words100) {
                unlockAchievement('words100');
            }
            if (learned >= 200 && !gameState.achievements.words200) {
                unlockAchievement('words200');
            }

            // í€´ì¦ˆ ê´€ë ¨ ì—…ì 
            if (gameState.quizzesCompleted >= 1 && !gameState.achievements.firstQuiz) {
                unlockAchievement('firstQuiz');
            }
            if (gameState.quizzesCompleted >= 10 && !gameState.achievements.quiz10) {
                unlockAchievement('quiz10');
            }
            if (gameState.quizzesCompleted >= 50 && !gameState.achievements.quiz50) {
                unlockAchievement('quiz50');
            }

            // ìŠ¤íŠ¸ë¦­ ì—…ì 
            if (gameState.streak >= 3 && !gameState.achievements.streak3) {
                unlockAchievement('streak3');
            }
            if (gameState.streak >= 7 && !gameState.achievements.streak7) {
                unlockAchievement('streak7');
            }

            // ì‹œê°„ëŒ€ ì—…ì 
            if (hour >= 6 && hour < 9 && !gameState.achievements.earlyBird) {
                unlockAchievement('earlyBird');
            }
            if (hour >= 21 && hour <= 23 && !gameState.achievements.nightOwl) {
                unlockAchievement('nightOwl');
            }

            saveGameState();
        }

        // ì—…ì  í•´ê¸ˆ
        function unlockAchievement(key) {
            gameState.achievements[key] = true;
            const def = achievementDefs[key];
            showAchievementPopup(def);
        }

        // ì—…ì  íŒì—…
        function showAchievementPopup(def) {
            const popup = document.createElement('div');
            popup.innerHTML = `
                <div style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
                            background: linear-gradient(135deg, #ffd54f, #ffb300);
                            padding: 20px 30px; border-radius: 20px; z-index: 9999;
                            box-shadow: 0 10px 40px rgba(0,0,0,0.3); text-align: center;
                            animation: slideDown 0.5s ease-out;">
                    <div style="font-size: 3rem;">${def.icon}</div>
                    <div style="font-weight: 800; font-size: 1.2rem; color: #333;">ì—…ì  ë‹¬ì„±!</div>
                    <div style="font-weight: 600; color: #555;">${def.name}</div>
                    <div style="font-size: 0.9rem; color: #666;">${def.desc}</div>
                </div>
            `;
            document.body.appendChild(popup);

            // íš¨ê³¼ìŒ & ì»¨í˜í‹°
            if (typeof confetti !== 'undefined') {
                confetti({ particleCount: 50, spread: 60, origin: { y: 0.3 } });
            }

            setTimeout(() => popup.remove(), 3000);
        }

        // ë©”ë‹¬ íšë“
        function awardMedal(percent) {
            if (percent === 100) {
                gameState.medals.gold++;
                if (!gameState.achievements.perfectScore) {
                    unlockAchievement('perfectScore');
                }
            } else if (percent >= 80) {
                gameState.medals.silver++;
            } else if (percent >= 60) {
                gameState.medals.bronze++;
            }
            saveGameState();
        }

        // í•™ìŠµì¼ ê¸°ë¡
        function recordStudyDate() {
            const today = new Date().toDateString();
            if (!gameState.studyDates) {
                gameState.studyDates = [];
            }
            if (!gameState.studyDates.includes(today)) {
                gameState.studyDates.push(today);
            }
            saveGameState();
        }

        // ===== ì„¤ì • =====
        function showSettings() {
            hideAll();
            document.getElementById('settingsView').classList.remove('hidden');

            // ë ˆë²¨ ì„ íƒ ë²„íŠ¼ ìƒì„±
            let levelHtml = '';
            for (let i = 1; i <= 5; i++) {
                const checked = gameState.selectedLevels.includes(i) ? 'checked' : '';
                levelHtml += `
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="level${i}" value="${i}" ${checked}>
                        <label class="form-check-label" for="level${i}">Lv.${i} ${levelStats[i].name}</label>
                    </div>
                `;
            }
            document.getElementById('levelSelect').innerHTML = levelHtml;

            // ì¼ì¼ ëª©í‘œ
            document.getElementById(`goal${gameState.dailyGoal}`).checked = true;

            // í•™ìŠµ ë‹¨ì–´ ìˆ˜
            document.getElementById(`word${gameState.wordCount}`).checked = true;
        }

        function saveSettings() {
            // ë ˆë²¨ ì„ íƒ ì €ì¥
            gameState.selectedLevels = [];
            for (let i = 1; i <= 5; i++) {
                if (document.getElementById(`level${i}`).checked) {
                    gameState.selectedLevels.push(i);
                }
            }
            if (gameState.selectedLevels.length === 0) {
                gameState.selectedLevels = [1];
            }

            // ì¼ì¼ ëª©í‘œ
            const goalRadio = document.querySelector('input[name="dailyGoal"]:checked');
            gameState.dailyGoal = parseInt(goalRadio.value);

            // í•™ìŠµ ë‹¨ì–´ ìˆ˜
            const wordRadio = document.querySelector('input[name="wordCount"]:checked');
            gameState.wordCount = parseInt(wordRadio.value);

            saveGameState();
            alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            goHome();
        }

        function resetProgress() {
            if (confirm('ì •ë§ ëª¨ë“  ì§„í–‰ ìƒí™©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('englishWordsGame');
                location.reload();
            }
        }

        // ===== ì„¤ì • íƒ­ ì „í™˜ =====
        function showSettingsTab(tabName) {
            // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
            document.getElementById('settingsTabContent').classList.add('hidden');
            document.getElementById('guideTabContent').classList.add('hidden');
            document.getElementById('featuresTabContent').classList.add('hidden');
            document.getElementById('tipsTabContent').classList.add('hidden');

            // ì„ íƒëœ íƒ­ ì»¨í…ì¸  ë³´ì´ê¸°
            document.getElementById(tabName + 'TabContent').classList.remove('hidden');

            // íƒ­ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.settings-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // ===== ìœ í‹¸ë¦¬í‹° =====
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        let soundEnabled = false;
        let audioContext = null;

        // ì¶•í•˜ íš¨ê³¼
        function celebrate() {
            // íŒ¡íŒŒë ˆ í™”ë©´ (ì»¨í˜í‹°)
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#667eea', '#764ba2', '#f59e0b', '#22c55e', '#ef4444']
                });
            }

            // ì¶•í•˜ ë©œë¡œë””
            playFanfare();
        }

        function playFanfare() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }

            const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
            const duration = 0.15;

            notes.forEach((freq, i) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = freq;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime + i * duration);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * duration + duration);

                oscillator.start(audioContext.currentTime + i * duration);
                oscillator.stop(audioContext.currentTime + i * duration + duration);
            });
        }

        function enableSound() {
            // ëª¨ë°”ì¼ì—ì„œ ì˜¤ë””ì˜¤ í™œì„±í™”
            soundEnabled = true;

            // ResponsiveVoice í™œì„±í™”
            if (typeof responsiveVoice !== 'undefined') {
                responsiveVoice.speak("Sound enabled", "US English Female", {
                    volume: 1,
                    onend: function() {
                        document.getElementById('soundEnable').innerHTML =
                            '<span class="text-success"><i class="bi bi-check-circle-fill"></i> ì†Œë¦¬ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</span>';
                    }
                });
            } else {
                // Web Speech API í™œì„±í™”
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance("Sound enabled");
                    utterance.lang = 'en-US';
                    utterance.onend = function() {
                        document.getElementById('soundEnable').innerHTML =
                            '<span class="text-success"><i class="bi bi-check-circle-fill"></i> ì†Œë¦¬ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</span>';
                    };
                    speechSynthesis.speak(utterance);
                }
            }
        }

        function speak(text, audioFile) {
            if (!soundEnabled) {
                alert('ë¨¼ì € ë©”ì¸ í™”ë©´ì—ì„œ "ì†Œë¦¬ ì¼œê¸°" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!');
                return;
            }

            // 1ìˆœìœ„: MP3 íŒŒì¼ ì¬ìƒ
            if (audioFile) {
                const audio = new Audio(audioFile);
                audio.play().then(() => {
                    // MP3 ì¬ìƒ ì„±ê³µ
                }).catch(() => {
                    // MP3 ì‹¤íŒ¨ ì‹œ í´ë°±
                    speakFallback(text);
                });
                return;
            }

            speakFallback(text);
        }

        function speakFallback(text) {
            // ResponsiveVoice ì‚¬ìš© (ëª¨ë°”ì¼ í˜¸í™˜)
            if (typeof responsiveVoice !== 'undefined') {
                responsiveVoice.cancel();
                responsiveVoice.speak(text, "US English Female", {
                    pitch: 1,
                    rate: 0.9,
                    volume: 1
                });
            } else {
                // í´ë°±: Web Speech API
                if ('speechSynthesis' in window) {
                    speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    speechSynthesis.speak(utterance);
                }
            }
        }

        // ì´ˆê¸°í™” ì‹¤í–‰
        init();
    </script>
</body>
</html>
