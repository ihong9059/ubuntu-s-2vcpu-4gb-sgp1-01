{% extends 'base.html' %}

{% block title %}홈{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-clipboard-check"></i> 메타인지 진단 테스트</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <h5><i class="bi bi-info-circle"></i> 메타인지란?</h5>
                    <p class="mb-0">
                        메타인지는 <strong>"자신의 인지 과정에 대해 아는 것"</strong>입니다.<br>
                        즉, 자신이 무엇을 알고 무엇을 모르는지 정확히 파악하는 능력으로,<br>
                        학습에서 매우 중요한 역할을 합니다.
                    </p>
                </div>

                <h5 class="mt-4"><i class="bi bi-person-fill"></i> 학생 정보 입력</h5>
                <form id="studentInfoForm">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">이름</label>
                            <input type="text" class="form-control" id="studentName" required placeholder="홍길동">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">학년</label>
                            <select class="form-select" id="studentGrade">
                                <option value="1">고등학교 1학년</option>
                                <option value="2" selected>고등학교 2학년</option>
                                <option value="3">고등학교 3학년</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">희망 진로/계열</label>
                            <select class="form-select" id="studentCareer">
                                <option value="미정">미정</option>
                                <option value="인문계열">인문계열</option>
                                <option value="사회계열">사회계열</option>
                                <option value="자연계열">자연계열</option>
                                <option value="공학계열">공학계열</option>
                                <option value="의약계열">의약계열</option>
                                <option value="예체능계열">예체능계열</option>
                                <option value="교육계열">교육계열</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">목표 대학 수준</label>
                            <select class="form-select" id="studentGoal">
                                <option value="미정">미정</option>
                                <option value="최상위권 (SKY)">최상위권 (SKY)</option>
                                <option value="상위권 (주요대)">상위권 (주요대)</option>
                                <option value="중상위권">중상위권</option>
                                <option value="중위권">중위권</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                    </div>
                </form>

                <hr class="my-4">

                <h5><i class="bi bi-list-check"></i> 테스트 구성 (총 5개 영역)</h5>
                <div class="list-group mt-3">
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1"><span class="badge bg-primary me-2">1</span> 자기인식 정확도</h6>
                                <small class="text-muted">자신의 실력을 얼마나 정확히 파악하는지 측정</small>
                            </div>
                            <span class="badge bg-secondary">약 10분</span>
                        </div>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1"><span class="badge bg-primary me-2">2</span> 학습전략 인식</h6>
                                <small class="text-muted">효과적인 학습 전략을 알고 사용하는지 파악</small>
                            </div>
                            <span class="badge bg-secondary">약 10분</span>
                        </div>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1"><span class="badge bg-primary me-2">3</span> 계획 및 목표설정</h6>
                                <small class="text-muted">학습 계획을 세우는 능력 평가</small>
                            </div>
                            <span class="badge bg-secondary">약 15분</span>
                        </div>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1"><span class="badge bg-primary me-2">4</span> 자기점검 능력</h6>
                                <small class="text-muted">학습 과정에서 스스로 점검하는 능력</small>
                            </div>
                            <span class="badge bg-secondary">약 10분</span>
                        </div>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1"><span class="badge bg-primary me-2">5</span> 자기조절 능력</h6>
                                <small class="text-muted">전략을 수정하고 조절하는 능력</small>
                            </div>
                            <span class="badge bg-secondary">약 10분</span>
                        </div>
                    </div>
                </div>

                <div class="alert alert-warning mt-4">
                    <i class="bi bi-exclamation-triangle"></i>
                    <strong>안내사항</strong>
                    <ul class="mb-0 mt-2">
                        <li>총 소요시간: 약 50~60분</li>
                        <li>솔직하게 응답해 주세요. 정답이 있는 것이 아닙니다.</li>
                        <li>중간에 종료하면 처음부터 다시 시작해야 합니다.</li>
                    </ul>
                </div>

                <div class="d-grid mt-4">
                    <button type="button" class="btn btn-primary btn-lg" onclick="startTest()">
                        <i class="bi bi-play-fill"></i> 테스트 시작하기
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function startTest() {
    const name = document.getElementById('studentName').value.trim();
    if (!name) {
        alert('이름을 입력해 주세요.');
        document.getElementById('studentName').focus();
        return;
    }

    // 시작 알림음 재생
    playStartSound();

    // 학생 정보 저장
    const studentInfo = {
        name: name,
        grade: document.getElementById('studentGrade').value,
        career: document.getElementById('studentCareer').value,
        goal: document.getElementById('studentGoal').value
    };
    localStorage.setItem('studentInfo', JSON.stringify(studentInfo));
    localStorage.setItem('testResults', JSON.stringify({}));

    // 알림음 후 첫 번째 테스트로 이동
    setTimeout(() => {
        window.location.href = '/test1';
    }, 500);
}
</script>
{% endblock %}
