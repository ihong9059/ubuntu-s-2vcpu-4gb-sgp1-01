# Server Management Work Log

**Date:** 2026-02-06
**Server IP:** 178.128.90.37

---

## 1. Web Server Status Check

현재 PC에서 실행 중인 웹 서버 목록 확인 (작업 전 12개)

| Port | 프로젝트 | 실행 방식 | 상태 |
|------|---------|-----------|------|
| 80 | Nginx (리버스 프록시) | nginx | 실행 중 |
| 90 | seju | node | **삭제됨** |
| 91 | uttec | node | 실행 중 |
| 5000 | eduProject (app.py) | python | 실행 중 |
| 6060 | 자동차운전면허시험 | node | 실행 중 |
| 7000 | 동호회 (app.py) | python | 실행 중 |
| 7001 | 동호회 (app.py) | python | 실행 중 |
| 7002 | 동호회 (run.py) | python | 실행 중 |
| 7070 | englishWords | node | 실행 중 |
| 7071 | universal | node | 실행 중 |
| 8000 | eduProject (app_simple.py) | python | 실행 중 |
| 9000 | filming-location | node | **로컬 삭제** |

---

## 2. GitHub Push Status Check

**Repository:** `git@github.com:ihong9059/ubuntu-s-2vcpu-4gb-sgp1-01.git`
**Branch:** main

모든 프로젝트가 하나의 Git Repository로 관리됨.

### 2.1 확인 결과

| 프로젝트 | GitHub 상태 |
|---------|-------------|
| seju | 동기화됨 → 삭제됨 |
| uttec | 동기화됨 |
| eduProject | 동기화됨 |
| 자동차운전면허시험 | 동기화됨 |
| 동호회 | 동기화됨 |
| englishWords | 동기화됨 |
| filming-location | 동기화됨 (유지) |
| universal | **신규 push** |

---

## 3. Completed Tasks

### 3.1 universal 프로젝트 GitHub Push

**Commit:** `77a10d6`
**Message:** "Add universal project: multi-language word learning app"

```
47 files changed, 4426 insertions(+)
- universal/package.json
- universal/package-lock.json
- universal/server.js
- universal/public/words.js
- universal/public/words/ (42개 언어조합 파일)
```

### 3.2 seju 프로젝트 완전 삭제

**작업 내용:**
1. PM2 서버 중단: `pm2 stop seju && pm2 delete seju`
2. 로컬 디렉토리 삭제: `rm -rf /root/seju`
3. GitHub에서 삭제: commit `bba3638`

**삭제된 파일:**
- seju/package.json
- seju/package-lock.json
- seju/server.js
- seju/seju_sales.db
- seju/public/index.html
- seju/public/mobile/index.html

**Port 90 해제됨**

### 3.3 filming-location 프로젝트 로컬만 삭제

**작업 내용:**
1. PM2 서버 중단: `pm2 stop filming-location && pm2 delete filming-location`
2. GitHub에서 복원: commit `c191048`
3. 로컬 디렉토리 삭제: `rm -rf /root/filming-location`
4. git commit 안 함 (로컬만 삭제 상태 유지)

**GitHub에 보존됨 - 언제든 복원 가능**

**복원 방법:**
```bash
# GitHub에서 복원
cd /root
git checkout origin/main -- filming-location/

# PM2로 서버 재시작
cd /root/filming-location
npm install
pm2 start server.js --name filming-location
pm2 save
```

**Port 9000 해제됨**

---

### 3.4 code-server 설치 (웹 기반 VSCode)

**설치 명령:**
```bash
curl -fsSL https://code-server.dev/install.sh | sh
```

**버전:** 4.108.2

**설정 파일:** `/root/.config/code-server/config.yaml`
```yaml
bind-addr: 0.0.0.0:8888
auth: none
cert: false
```

**접속 정보:**
| 항목 | 값 |
|-----|-----|
| URL | http://178.128.90.37:8888 |
| 인증 | 비활성화 (비밀번호 불필요) |

**주의:** URL을 아는 누구나 접속 가능

**서비스 관리:**
```bash
# 상태 확인
systemctl status code-server@root

# 재시작
systemctl restart code-server@root

# 중지
systemctl stop code-server@root
```

**메모리 사용:** ~45MB
**자동 시작:** 활성화됨 (부팅 시 자동 실행)

**터미널 alias 추가 (~/.bashrc):**
```bash
alias code='code-server'
```

**비밀번호 다시 활성화 방법:**
```bash
# 설정 파일 수정
vi /root/.config/code-server/config.yaml

# 변경 내용:
# auth: none → auth: password
# password: e7fe2de6688fc66762368221 (주석 해제)

# 재시작
systemctl restart code-server@root
```

### 3.5 uttec-homepage 설정 (Next.js → Nginx 80 포트)

**프로젝트 경로:** `/root/uttecHome/uttec-homepage/`
**프레임워크:** Next.js 14.2.35

**설치 및 빌드:**
```bash
cd /root/uttecHome/uttec-homepage
npm install
npm run build
```

**PM2로 실행:**
```bash
pm2 start npm --name "uttec-homepage" -- start -- -p 3000
pm2 save
```

**Nginx 설정 (80 → 3000 프록시):**

파일: `/etc/nginx/sites-enabled/default`
```nginx
location / {
    proxy_pass http://localhost:3000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_cache_bypass $http_upgrade;
}
```

**접속 정보:**
| 항목 | 값 |
|-----|-----|
| URL | http://178.128.90.37 (포트 80) |
| 내부 포트 | 3000 (Next.js) |
| PM2 이름 | uttec-homepage |

**페이지 구성 (17개):**
- / (홈)
- /about, /about/history, /about/team, /about/partners
- /contact
- /platforms, /platforms/certification, /platforms/education
- /portfolio, /portfolio/demos
- /solutions, /solutions/smart-factory, /solutions/smart-farm
- /privacy, /terms
- /monitor (Nginx 프록시 → localhost:9999)

---

## 4. Git Commits Today

| Commit | Message |
|--------|---------|
| `77a10d6` | Add universal project: multi-language word learning app |
| `bba3638` | Remove seju project |
| `d8d9410` | Remove filming-location project |
| `c191048` | Restore filming-location project to GitHub |
| `1e7d3dd` | Add work logs for 2026-02-04 and 2026-02-06 |
| `2552270` | Update work log: add uttec-homepage setup |
| `1129be1` | Update work log: add password re-enable instructions |
| `becaa3e` | Update work log: code-server auth disabled, alias added |
| `16064eb` | Update work log: add code-server installation |
| `b06324e` | Update external links to production URLs and add progress report |
| `7c8d463` | Add missing pages, fix external links, and add system monitor |
| `c7a9d8c` | Update contact info and fix monitor link |

---

## 5. 추가 작업 (2차 세션)

### 5.1 미구현 페이지 5개 생성

| 페이지 | 경로 | 내용 |
|--------|------|------|
| 연혁 | `/about/history` | 1980s~2020s 시대별 타임라인 (40년 기술 혁신 역사) |
| 조직/인력 | `/about/team` | 홍광선 대표(40년+), 임호균 이사(38년+) 프로필, 핵심 역량 |
| 파트너사 | `/about/partners` | 25개 스마트팩토리 고객사, 기술 제휴사, 교육/정부 협력 |
| 개인정보처리방침 | `/privacy` | 개인정보보호법 기반 9개 조항 |
| 이용약관 | `/terms` | 서비스 이용조건 10개 조항 + 부칙 |

### 5.2 외부 링크 수정 (내부 IP → 프로덕션 URL)

총 7곳 수정:

| 파일 | 변경 전 | 변경 후 |
|------|---------|---------|
| `platforms/certification/page.tsx` (2곳) | `http://192.168.0.32:4000` | `https://uttec-cert.duckdns.org/` |
| `platforms/education/page.tsx` (2곳) | `http://192.168.0.32:3001` | `https://uttec-edu.duckdns.org/` |
| `portfolio/demos/page.tsx` (1곳) | `http://192.168.0.32:7000` | `https://uttec-sensor.duckdns.org` |
| `components/layout/Header.tsx` (2곳) | `http://178.128.90.37:9999` | `/monitor` |

### 5.3 서버 모니터 Nginx 프록시 설정

**Nginx `/monitor` 경로 추가:**

파일: `/etc/nginx/sites-enabled/default`
```nginx
location /monitor {
    proxy_pass http://localhost:9999/;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```

**접속 방법:**
- 홈페이지 Header 우측 모니터 아이콘 클릭
- 직접 URL: `http://178.128.90.37/monitor`

### 5.4 연락처 정보 수정

| 항목 | 변경 전 | 변경 후 |
|------|---------|---------|
| 전화번호 | 042-716-8884 | 010-3922-1809 |
| 이메일 | info@uttec.co.kr | uttec@uttec.co.kr |

수정된 파일: `navigation.ts`, `privacy/page.tsx`, `terms/page.tsx`

---

## 6. Current Server Status (최종)

**실행 중인 웹 서버: 13개**

| Port | 프로젝트 | PM2 이름 | 비고 |
|------|---------|----------|------|
| 80 | Nginx → uttec-homepage | - | Next.js 프록시 |
| 80/monitor | Nginx → system-monitor | - | 리소스 모니터 프록시 |
| 91 | uttec | uttec | |
| 3000 | uttec-homepage | uttec-homepage | Nginx 80으로 프록시 |
| 5000 | eduProject | - | |
| 6060 | 자동차운전면허시험 | driving-license | |
| 7000 | 동호회 | - | |
| 7001 | 동호회 | - | |
| 7002 | 동호회 | - | |
| 7070 | englishWords | english-words | |
| 7071 | universal | - | |
| 8000 | eduProject | - | |
| 8888 | code-server (VSCode) | systemd | |
| 9999 | system-monitor | system-monitor | Nginx /monitor로 프록시 |

**PM2 현재 상태:**
```
driving-license (port 6060) - online
english-words (port 7070) - online
system-monitor (port 9999) - online
uttec (port 91) - online
uttec-homepage (port 3000) - online
```

**Systemd 서비스:**
```
code-server@root (port 8888) - active
```

---

## 7. Nginx Configuration

**파일:** `/etc/nginx/sites-enabled/default`

| 설정 | 내용 |
|-----|------|
| 기본 서버 (80) `/` | → localhost:3000 (uttec-homepage) 프록시 |
| 기본 서버 (80) `/monitor` | → localhost:9999 (system-monitor) 프록시 |

---

## 8. uttec-homepage 전체 페이지 현황

**총 17개 라우트:**

| 경로 | 설명 | 상태 |
|------|------|------|
| `/` | 홈페이지 | 완료 |
| `/about` | 회사소개 | 완료 |
| `/about/history` | 연혁 | 완료 (2차 세션) |
| `/about/team` | 조직/인력 | 완료 (2차 세션) |
| `/about/partners` | 파트너사 | 완료 (2차 세션) |
| `/solutions` | 솔루션 개요 | 완료 |
| `/solutions/smart-factory` | 스마트팩토리 | 완료 |
| `/solutions/smart-farm` | 스마트팜 | 완료 |
| `/platforms` | 플랫폼 개요 | 완료 |
| `/platforms/education` | AI 교육 | 완료 |
| `/platforms/certification` | 자격시험 | 완료 |
| `/portfolio` | 포트폴리오 | 완료 |
| `/portfolio/demos` | 데모 사이트 (인터랙티브) | 완료 |
| `/contact` | 문의 | 완료 |
| `/privacy` | 개인정보처리방침 | 완료 (2차 세션) |
| `/terms` | 이용약관 | 완료 (2차 세션) |
| `/monitor` | 서버 리소스 모니터 | 완료 (Nginx 프록시) |

---

## 9. Claude Code 세션 이어하기

작업 중단 후 이전 대화를 이어서 진행하는 방법:

```bash
# 가장 최근 대화 바로 이어하기
claude --continue
# 또는
claude -c

# 최근 대화 목록에서 선택하여 이어하기
claude --resume
```

- `--continue`: 가장 최근 대화를 바로 이어감
- `--resume`: 목록에서 선택 가능

---

## 10. Notes

- 모든 프로젝트는 `/root/` 디렉토리 하위에 위치
- 하나의 Git Repository로 전체 관리
- PM2로 Node.js 서버 관리 (자동 재시작)
- Python 서버는 별도 프로세스로 실행 중
- Contact 폼 백엔드 처리 미구현 (submit 핸들러 없음)
- 지도 영역 placeholder 상태 (카카오맵/구글맵 연동 예정)
- 팩스번호 (042-716-8883) 유지 중

---

*Last Updated: 2026-02-06*
